"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[5841,8222,8292],{48292:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N,renderETDateAtCell:()=>M});var n=a(80045),r=a(89379),o=a(65043),i=a(26240),l=a(46946),d=a(65204),s=a(94496),u=a(8591),m=a(42788),h=a(72882),c=a(97334),f=a(57488),p=(a(92342),a(77265)),v=a(81451),g=a(51325),x=a(70579);const b=["rowID","patientFirstName","patientMiddleName","patientLastName","patientSpouseFirstName","patientSpouselastName"],y={mrn:"",fname:"",fatname:"",gfatname:"",mobile:""},M=e=>{try{if(!e)return"";const t=new Date(e),a=new Date(t.getTime()+108e5),n=v.N.fromEuropeanDate(a);return"".concat(n.year,"-").concat(String(n.month).padStart(2,"0"),"-").concat(String(n.date).padStart(2,"0"))}catch(t){return console.error("Date conversion error:",t),""}},D=(e,t)=>{try{return"Reset"===t.name?y:(0,r.A)((0,r.A)({},e),{},{[t.name]:t.values})}catch(a){console.error("State Update Error: ",a)}},A=(e,t)=>{try{return"Reset"===t.name?y:(0,r.A)((0,r.A)({},e),{},{[t.name]:t.values})}catch(a){console.error("State Update Error: ",a)}},w=async e=>{try{return e.length>0?e.map(((e,t)=>{let{rowID:a,patientFirstName:o,patientMiddleName:i,patientLastName:l,patientSpouseFirstName:d,patientSpouselastName:s}=e,u=(0,n.A)(e,b);return(0,r.A)({id:t+1,patientFName:o+" "+i+" "+l,patientSpouseName:d+" "+s},u)})):[]}catch(t){return console.error("This is the Data Modification Error: ",t),[]}},N=()=>{const e=(0,i.A)(),[t,a]=(0,o.useReducer)(D,y),[n,r]=(0,o.useReducer)(A,y),[v,b]=(0,o.useState)(!1),[N,k]=(0,o.useState)([]),[S,O]=(0,o.useState)([]),[C,j]=(0,o.useState)(0),[I,T]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const n=await p.A.put("/Patient/get-patient-info",{currentTime:new Date});if(200===(null===n||void 0===n?void 0:n.status)){var e,t,a;const r=await w(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.value);k(r),j((null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.count)||0)}}catch(n){console.error("This is Fetch Data Error: ",n)}})()}),[]),(0,o.useEffect)((()=>{T(F())}),[t]);const P=[{field:"patientCardNumber",headerName:"Patient MRN",flex:1},{field:"patientFName",headerName:"Patient Name",flex:1},{field:"patientMotherName",headerName:"Mother Name",flex:1},{field:"patientGender",headerName:"Gender",flex:1,maxWidth:"10px"},{field:"patientDOB",headerName:"Date of Birth",flex:1,renderCell:e=>{var t;return M(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.patientDOB)}},{field:"patientPhoneNumber",headerName:"Mobile",flex:1},{field:"appointment",headerName:"Provider",flex:1},{field:"department",headerName:"Department",flex:1},{field:"patientSpouseName",headerName:"Spouse Name",flex:1},{field:"patientVisitingDate",headerName:"Visiting Date",flex:1,renderCell:e=>{var t;return M(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.patientVisitingDate)}}],W=e=>{try{"fname"===e.target.name||"fatname"===e.target.name||"gfatname"===e.target.name?L(e.target.name,e.target.value):"mrn"===e.target.name?E(e.target.name,e.target.value):z(e.target.name,e.target.value),a({name:e.target.name,values:e.target.value})}catch(t){console.error("The Handle Chnage Error: ",t),f.oR.error("Some thing went wrong.")}},E=(e,t)=>{!/^[0-9a-zA-Z\s\_\-]{5,}$/.test(t)&&(null===t||void 0===t?void 0:t.length)>0?r({name:e,values:"Please enter valid MRN (5+ digits)."}):r({name:e,values:""})},F=()=>t.fname.length>0||t.fatname.length>0||t.gfatname.length>0||(null===t||void 0===t?void 0:t.mrn.length)>0||(null===t||void 0===t?void 0:t.mobile.length)>0||(O([]),!1),R=async()=>{try{if(b(!0),t.fname.length<=0&&t.fatname.length<=0&&t.gfatname.length<=0&&(null===t||void 0===t?void 0:t.mrn.length)<=0&&(null===t||void 0===t?void 0:t.mobile.length)<=0)return void f.oR.info("Please fill at least one of field to search.");if(Object.values(n).some((e=>e.length>0)))return void f.oR.info("Please fix the errors first.");const r=await(async(e,t,a,n,r)=>{try{const o={currentTime:new Date};return e&&(o.patientLastName=e),t&&(o.patientMiddleName=t),a&&(o.patientFirstName=a),n&&(o.patientPhone=n),r&&(o.patientCardNumber=r),o}catch(o){return console.error("This is the Conditional Rendering Error: ",o),{}}})(t.gfatname,t.fatname,t.fname,t.mobile,null===t||void 0===t?void 0:t.mrn),o=await p.A.put("/Patient/get-patient-info",r);if(200===(null===o||void 0===o?void 0:o.status)){var e,a;const t=await w(null===o||void 0===o||null===(e=o.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.value);t.length>0?O(t):(f.oR.info("Data not found!"),O([]))}}catch(i){var r,o;console.error("The Searching Error: ",i),f.oR.error((null===i||void 0===i||null===(r=i.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"Internal server error.")}finally{b(!1)}},L=(e,t)=>{!/^[a-zA-Z\u1200-\u137F]{3,}$/.test(t)&&t.length>0?r({name:e,values:"Name must be only letters, at least 3 characters long, and contain no spaces."}):r({name:e,values:""})},z=(e,t)=>{!/^(?:\+251|09|07)\d+$/.test(t)&&t.length>0?r({name:e,values:"Phone number must start with +251, 09, or 07 and contain only numbers."}):t.startsWith("+251")&&13!==t.length?r({name:e,values:"Phone number starting with +251 must have 13 digits."}):(t.startsWith("09")||t.startsWith("07"))&&10!==t.length?r({name:e,values:"Phone number starting with 09 or 07 must have 10 digits."}):r({name:e,values:""})};return(0,x.jsxs)("div",{children:[(0,x.jsx)(l.A,{sx:{mx:"auto",p:{xs:2,sm:3},mt:4,borderRadius:2,boxShadow:3,marginInline:"15px"},children:(0,x.jsxs)(d.A,{elevation:1,sx:{p:{xs:2,sm:3}},children:[(0,x.jsx)(s.A,{variant:"h6",sx:{mb:2,borderBottom:"2px solid ".concat(e.palette.primary.main),display:"inline-block",fontWeight:600},children:"Patient Search"}),(0,x.jsxs)(u.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mb:2},children:[(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,x.jsx)(m.A,{label:"MRN",value:null===t||void 0===t?void 0:t.mrn,name:"mrn",onChange:W,error:!(null===n||void 0===n||!n.mrn),helperText:null===n||void 0===n?void 0:n.mrn,fullWidth:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,x.jsx)(m.A,{label:"First Name",value:null===t||void 0===t?void 0:t.fname,name:"fname",onChange:W,error:!(null===n||void 0===n||!n.fname),helperText:null===n||void 0===n?void 0:n.fname,fullWidth:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,x.jsx)(m.A,{label:"Father Name",value:null===t||void 0===t?void 0:t.fatname,name:"fatname",onChange:W,error:!(null===n||void 0===n||!n.fatname),helperText:null===n||void 0===n?void 0:n.fatname,fullWidth:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,x.jsx)(m.A,{label:"Grand Father Name",value:null===t||void 0===t?void 0:t.gfatname,name:"gfatname",onChange:W,error:!(null===n||void 0===n||!n.gfatname),helperText:null===n||void 0===n?void 0:n.gfatname,fullWidth:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,x.jsx)(m.A,{label:"Mobile",value:null===t||void 0===t?void 0:t.mobile,name:"mobile",onChange:W,error:!(null===n||void 0===n||!n.mobile),helperText:null===n||void 0===n?void 0:n.mobile,fullWidth:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,x.jsx)(h.A,{variant:"contained",color:"light"===e.palette.mode?"primary":"secondary",fullWidth:!0,onClick:()=>R(),sx:{height:"100%"},children:v?(0,x.jsx)(c.A,{size:24,color:"inherit"}):"Search"})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,x.jsx)(h.A,{variant:"outlined",color:"error",onClick:()=>{a({name:"Reset"}),r({name:"Reset"})},fullWidth:!0,sx:{height:"100%"},children:"Cancel"})})]}),(0,x.jsxs)(u.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mb:2},children:[(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,x.jsx)(s.A,{variant:"subtitle1",sx:{mb:1,fontWeight:500,color:"text.secondary"},children:"Patients Information"})}),(0,x.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,x.jsxs)(s.A,{variant:"subtitle1",sx:{mb:1,fontWeight:500,color:"text.secondary",justifySelf:"end"},children:["Total Patient is \xa0 ",(0,x.jsx)("strong",{children:C})]})})]}),(0,x.jsx)(l.A,{children:(0,x.jsx)(g.A,{rows:I?S:N,columns:P,loading:v,disableSelectionOnClick:!0})})]})}),(0,x.jsx)(f.N9,{})]})}},51325:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(89379),r=a(80045),o=a(65043),i=a(61976),l=a(46946),d=a(70579);const s=["height","minWidth","sx","columns"],u=e=>{let{height:t=500,minWidth:a=320,sx:u={},columns:m}=e,h=(0,r.A)(e,s);const c=o.useMemo((()=>m?m.map((e=>{var t,a;return(0,n.A)((0,n.A)({},e),{},{minWidth:null!==(t=e.minWidth)&&void 0!==t?t:100,flex:null!==(a=e.flex)&&void 0!==a?a:1})})):[]),[m]);return(0,d.jsx)(l.A,{sx:(0,n.A)({height:t,width:"100%",minWidth:a,overflow:"hidden",display:"flex",flexDirection:"column"},u),children:(0,d.jsx)(i.z,(0,n.A)((0,n.A)({columns:c},h),{},{sx:{flex:1,minWidth:0}}))})}},81451:(e,t,a)=>{a.d(t,{N:()=>s});var n=Object.defineProperty,r=(e,t,a)=>(((e,t,a)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const o=new Date("December 9, 2012").getTime()-new Date("April 1, 2005").getTime(),i=new Date(1900,2,1),l=new Date(2100,1,1);function d(e){return{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[e]}class s{constructor(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(r(this,"year"),r(this,"month"),r(this,"date"),r(this,"hour"),r(this,"minute"),r(this,"second"),r(this,"toTimeString",(()=>this.hour<13?h(this.hour)+":"+h(this.minute)+":"+h(this.second)+" a.m.":h(this.hour-12)+":"+h(this.minute)+":"+h(this.second)+" p.m.")),r(this,"toDateString",(()=>({1:"Meskerem ",2:"Tikimt ",3:"Hidar ",4:"Tahsas ",5:"Tir ",6:"Yekatit ",7:"Megabit ",8:"Meyazya ",9:"Ginbot ",10:"Sene ",11:"Hamle ",12:"Nehase ",13:"Pagume "}[this.month]+this.date+", "+this.year))),r(this,"toDateWithDayString",(()=>"".concat(d(this.getDay()),", ").concat(this.toDateString()))),r(this,"toString",(()=>"".concat(this.toDateString(),", ").concat(this.toTimeString()))),r(this,"toFullDateTimeString",(()=>"".concat(this.toString(),", ").concat(d(this.getDay())," ."))),r(this,"getDay",(()=>{return(this.year+2*this.month+this.date+(e=this.year,-Math.floor((2023-e)/4)))%7;var e})),a>30)throw new Error("Invalid Ethiopian Date: ".concat(a));if(t<1||t>13)throw new Error("Invalid Ethiopian Month: ".concat(t));this.year=e>200?e:e+1900,this.month=t,this.date=a,this.hour=n,this.minute=o,this.second=i}static now(){const e=new Date;return this.fromEuropeanDate(e)}static fromEuropeanDate(e){return m(e)}toEuropeanDate(){return function(e){const t=new Date(new Date(Date.UTC(e.year,e.month-1,e.date)).getTime()+o);if(13===e.month){let t;if(t=e.year%4===3?6:5,e.date>t)throw"Pagume Only has "+t+" days at year "+e.year+". Please select another day."}for(let a=-8;a<9;a++){const n=new Date(t.getTime()+864e5*a),r=n.getTime()-new Date(Date.UTC(1971,8,12)).getTime(),o=Math.floor(r/1262304e5);let i=Math.floor((r-1262304e5*o)/31536e6);4===i&&(i=3);const l=Math.floor((r-1262304e5*o-31536e6*i)/2592e6),d=Math.floor((r-1262304e5*o-31536e6*i-30*l*864e5)/864e5);if(e.date===d+1&&e.month===l+1){if(!u(n))throw"Out of range input year: ".concat(n.getFullYear());return n}}throw"Date not converted: ".concat(e.year,",  ").concat(e.month,",  ").concat(e.date,", ")}(this)}}function u(e){return e>=i&&e<=l}function m(e){if(!u(e))throw"Out of range input year: ".concat(e.getFullYear());const t=e.getTime()-new Date(Date.UTC(1971,8,12)).getTime(),a=Math.floor(t/1262304e5);let n=Math.floor((t-1262304e5*a)/31536e6);4===n&&(n=3);const r=Math.floor((t-1262304e5*a-31536e6*n)/2592e6),o=Math.floor((t-1262304e5*a-31536e6*n-30*r*864e5)/864e5);let i=e.getHours();return i<0&&(i+=24),new s(n+4*a+1964,r+1,o+1,i,e.getMinutes(),e.getSeconds())}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")}},92342:()=>{}}]);
//# sourceMappingURL=8292.1199318a.chunk.js.map