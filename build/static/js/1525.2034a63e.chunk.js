"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[172,1525,5841,8222],{1223:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey")},16005:(e,o,t)=>{t.d(o,{A:()=>h});t(65043);var r=t(26240),a=t(57556),l=t(266),s=t(46946),d=t(94496),n=t(71716),i=t(72882),u=t(97334),c=t(74802),p=t(98348),f=t(70579);const m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,boxShadow:24,p:3,borderRadius:2,textAlign:"center"},h=e=>{let{isOpen:o,onClose:t,onConfirm:h,userData:x,userRole:v,loading:b}=e;const A=(0,r.A)();return(0,f.jsx)(a.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&t()},disableEscapeKeyDown:!0,closeAfterTransition:!0,BackdropComponent:l.A,BackdropProps:{timeout:500},"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:(0,f.jsxs)(s.A,{sx:m,bgcolor:"light"===A.palette.mode?A.palette.background.paper:A.palette.background.default,children:[(0,f.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,f.jsxs)(d.A,{variant:"h6",fontWeight:"bold",id:"confirmation-modal-title",sx:{color:e=>"light"===e.palette.mode?e.palette.primary.main:e.palette.info.light,display:"flex",alignItems:"center"},children:[(0,f.jsx)(p.A,{sx:{fontSize:28,mr:1}}),"Please Confirm"]}),(0,f.jsx)(n.A,{onClick:t,color:"error","aria-label":"close modal",children:(0,f.jsx)(c.A,{})})]}),(0,f.jsxs)(d.A,{variant:"body1",textAlign:"center",mt:2,id:"confirmation-modal-description",children:["Are you sure you want to delete the"," ",v?'role "'.concat(v,'"'):"user ",(0,f.jsx)("strong",{children:x}),"?"]}),(0,f.jsxs)(s.A,{display:"flex",justifyContent:"center",mt:3,children:[(0,f.jsx)(i.A,{variant:"contained",color:"light"===A.palette.mode?"primary":"secondary",onClick:()=>{h({userData:x,message:"Delete"})},sx:{mx:1},"aria-label":"confirm deletion",children:b?(0,f.jsx)(u.A,{size:24,color:"inherit"}):"Confirm"}),(0,f.jsx)(i.A,{variant:"outlined",color:"error",onClick:t,sx:{mx:1},"aria-label":"cancel deletion",children:"Cancel"})]})]})})}},50445:()=>{},51325:(e,o,t)=>{t.d(o,{A:()=>u});var r=t(89379),a=t(80045),l=t(65043),s=t(61976),d=t(46946),n=t(70579);const i=["height","minWidth","sx","columns"],u=e=>{let{height:o=500,minWidth:t=320,sx:u={},columns:c}=e,p=(0,a.A)(e,i);const f=l.useMemo((()=>c?c.map((e=>{var o,t;return(0,r.A)((0,r.A)({},e),{},{minWidth:null!==(o=e.minWidth)&&void 0!==o?o:100,flex:null!==(t=e.flex)&&void 0!==t?t:1})})):[]),[c]);return(0,n.jsx)(d.A,{sx:(0,r.A)({height:o,width:"100%",minWidth:t,overflow:"hidden",display:"flex",flexDirection:"column"},u),children:(0,n.jsx)(s.z,(0,r.A)((0,r.A)({columns:f},p),{},{sx:{flex:1,minWidth:0}}))})}},57566:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},63471:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},74802:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},91525:(e,o,t)=>{t.r(o),t.d(o,{default:()=>S});var r=t(89379),a=t(65043),l=(t(50445),t(26240)),s=t(71716),d=t(72882),n=t(95540),i=t(63471),u=t(1223),c=t(57566),p=t(57556),f=t(266),m=t(46946),h=t(94496),x=t(8591),v=t(42788),b=t(94814),A=t(74802),k=t(57488),g=t(70579);const C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:500,md:600},maxHeight:"90vh",overflowY:"auto",boxShadow:24,p:3,borderRadius:2},w=e=>{let{isOpen:o,onClose:t,onSubmit:n,userData:i,onEdit:u,resetUserData:c,role:w}=e;const[y,j]=(0,a.useState)({username:"",email:"",password:"",confirmpassword:"",phone:"",role:"",department:"",usertype:"",hospital:"DB Tena tabiya"}),[O,I]=(0,a.useState)(""),[M,P]=(0,a.useState)(""),[S,D]=(0,a.useState)(""),[N,R]=(0,a.useState)(""),W=(0,l.A)(),T=()=>{j({username:"",email:"",password:"",confirmpassword:"",phone:"",role:"",department:"",usertype:"",hospital:"DB Tena tabiya"}),R(""),P(""),I(""),c(),t()};(0,a.useEffect)((()=>{i&&j({username:(null===i||void 0===i?void 0:i.username)||"",email:(null===i||void 0===i?void 0:i.email)||"",password:"",confirmpassword:"",phone:(null===i||void 0===i?void 0:i.phoneNumber)||"",role:(null===i||void 0===i?void 0:i.role)||"",department:(null===i||void 0===i?void 0:i.departement)||"",usertype:(null===i||void 0===i?void 0:i.userType)||"",hospital:(null===i||void 0===i?void 0:i.hospital)||"DB Tena tabiya"})}),[i]);const z=e=>{j((0,r.A)((0,r.A)({},y),{},{[e.target.name]:e.target.value})),"email"===e.target.name&&L(e.target.value),"phone"===e.target.name&&U(e.target.value),"username"===e.target.name&&E(e.target.value),"confirmpassword"===e.target.name&&R("")},E=e=>{I(/^[A-Za-z][A-Za-z0-9]{3,}$/.test(e)?"":"Username must start with a letter and be at least 4 characters.")},L=e=>{P(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?"":"Invalid email format.")},U=e=>{/^(?:\+251|09|07)\d+$/.test(e)?e.startsWith("+251")&&13!==e.length?D("+251 numbers must be 13 digits."):(e.startsWith("09")||e.startsWith("07"))&&10!==e.length?D("09 or 07 numbers must be 10 digits."):D(""):D("Start with +251, 09, or 07 and use only digits.")};return(0,a.useEffect)((()=>{o||T()}),[o]),(0,g.jsx)(p.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&T()},disableEscapeKeyDown:!0,closeAfterTransition:!0,BackdropComponent:f.A,BackdropProps:{timeout:500},children:(0,g.jsxs)(m.A,{sx:C,bgcolor:"light"===W.palette.mode?W.palette.background.paper:W.palette.background.default,children:[(0,g.jsxs)(m.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,g.jsx)(h.A,{variant:"h6",children:i?"Edit User":"Add New User"}),(0,g.jsx)(s.A,{onClick:T,children:(0,g.jsx)(A.A,{})})]}),(0,g.jsxs)(m.A,{component:"form",onSubmit:e=>{if(e.preventDefault(),O||M||S)alert("Please fix the errors before submitting.");else{if(y.password!==y.confirmpassword)return void R("Passwords do not match.");if("Tsedey Bank"===y.department&&"Cashier"===y.usertype)return void k.oR.error("Bank can't have Cashier user type.");i?u(y):n(y)}},children:[(0,g.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{fullWidth:!0,label:"Username",name:"username",value:y.username,onChange:z,required:!0,disabled:!!i,error:!!O,helperText:O,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}}})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:y.email,onChange:z,required:!0,disabled:!!i,error:!!M,helperText:M,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}}})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,children:(0,g.jsx)(v.A,{fullWidth:!0,label:"Phone Number",name:"phone",type:"tel",value:y.phone,onChange:z,error:!!S,helperText:S,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}}})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{select:!0,fullWidth:!0,label:"User Type",name:"usertype",value:y.usertype,onChange:z,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}},children:["Cashier","Supervisor","Admin","MLT","Radiology","Doctor","Pharmacy"].map((e=>(0,g.jsx)(b.A,{value:e,children:e},e)))})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{select:!0,fullWidth:!0,label:"Department",name:"department",value:y.department,onChange:z,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}},children:["Card","Pharmacy","Hospital","Tsedey Bank","OPD 20","OPD 21","OPD 22","OPD 23","OPD 44","OPD 63","ANC","FAMILY PLANNING","DELIVERY","SURGICAL","NICU","ART"].map((e=>(0,g.jsx)(b.A,{value:e,children:e},e)))})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,children:(0,g.jsx)(v.A,{select:!0,fullWidth:!0,label:"Hospital Name",name:"hospital",value:y.hospital,onChange:z,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}},children:["DB Tena tabiya"].map((e=>(0,g.jsx)(b.A,{value:e,children:e},e)))})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{fullWidth:!0,label:"Password",name:"password",type:"password",value:y.password,onChange:z,required:!0,disabled:!!i,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}}})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(v.A,{fullWidth:!0,label:"Confirm Password",name:"confirmpassword",type:"password",value:y.confirmpassword,onChange:z,required:!0,disabled:!!i,error:!!N,helperText:N,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}}})}),(0,g.jsx)(x.Ay,{item:!0,xs:12,children:(0,g.jsx)(v.A,{select:!0,fullWidth:!0,label:"Role",name:"role",value:i?y.role:"User",onChange:z,required:!0,disabled:!i,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===W.palette.mode?"#fff":"#000"},color:"dark"===W.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===W.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===W.palette.mode?"#fff":"#000"}}},children:w.map((e=>(0,g.jsx)(b.A,{value:e,children:e},e)))})})]}),(0,g.jsxs)(m.A,{display:"flex",justifyContent:"flex-end",mt:3,children:[(0,g.jsx)(d.A,{onClick:T,variant:"outlined",color:"error",sx:{mr:2},children:"Close"}),(0,g.jsx)(d.A,{type:"submit",variant:"contained",color:"light"===W.palette.mode?"primary":"secondary",children:i?"Save Changes":"Add User"})]})]})]})})};var y=t(16005),j=(t(92342),t(77265));const O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,padding:4,borderRadius:2,boxShadow:24},I={position:"absolute",top:10,right:10},M=e=>{let{open:o,onClose:t,username:n,onSubmit:i,clearUserData:u}=e;const[c,f]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[C,w]=(0,a.useState)(""),[y,j]=(0,a.useState)({newPassword:"",confirmPassword:""}),M=(0,l.A)();(0,a.useEffect)((()=>{o||S()}),[o]);const P=(e,o)=>{const t=[];o.length<6&&t.push("Passwords must be at least 6 characters."),/[^\w\s]/.test(o)||t.push("Passwords must have at least one non-alphanumeric character."),/[a-z]/.test(o)||t.push("Passwords must have at least one lowercase ('a'-'z')."),/[A-Z]/.test(o)||t.push("Passwords must have at least one uppercase ('A'-'Z')."),j((o=>(0,r.A)((0,r.A)({},o),{},{[e]:t.join(", ")})))},S=()=>{b(""),f(""),w(""),j({newPassword:"",confirmPassword:""}),u(),t()};return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(p.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&S()},children:(0,g.jsxs)(m.A,{sx:O,bgcolor:"light"===M.palette.mode?M.palette.background.paper:M.palette.background.default,children:[(0,g.jsx)(s.A,{sx:I,onClick:t,children:(0,g.jsx)(A.A,{})}),(0,g.jsxs)(h.A,{variant:"h6",gutterBottom:!0,children:["Set Password for ",(0,g.jsx)("strong",{children:n})]}),(0,g.jsx)(v.A,{label:"Username",fullWidth:!0,value:n,disabled:!0,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},color:"dark"===M.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===M.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===M.palette.mode?"#fff":"#000"}}}}),(0,g.jsx)(v.A,{label:"Password",type:"password",name:"newPassword",fullWidth:!0,value:c,onChange:e=>{f(e.target.value),P(e.target.name,e.target.value)},error:!!y.newPassword,helperText:y.newPassword,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},color:"dark"===M.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===M.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===M.palette.mode?"#fff":"#000"}}}}),(0,g.jsx)(v.A,{label:"Confirm Password",type:"password",name:"confirmPassword",fullWidth:!0,value:x,onChange:e=>{b(e.target.value),P(e.target.name,e.target.value)},error:!!y.confirmPassword,helperText:y.confirmPassword,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===M.palette.mode?"#fff":"#000"},color:"dark"===M.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===M.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===M.palette.mode?"#fff":"#000"}}}}),C&&(0,g.jsx)(h.A,{color:"error",variant:"body2",sx:{marginBottom:2},children:C}),(0,g.jsxs)(m.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(d.A,{variant:"outlined",onClick:S,children:"Cancel"}),(0,g.jsx)(d.A,{variant:"contained",color:"light"===M.palette.mode?"primary":"secondary",onClick:()=>(()=>{if((null===c||void 0===c?void 0:c.length)<=0&&(null===x||void 0===x?void 0:x.length)<=0)return k.oR.error("Please fill the required fields."),void j({newPassword:"Please fill this field.",confirmPassword:"Please fill this field."});if(c===x){if(y.newPassword||y.confirmPassword)return void k.oR.error("Please fix the errors before submitting.");i(n,c,x),w(""),j({newPassword:"",confirmPassword:""})}else w("Passwords do not match!")})(),children:"Submit"})]})]})})})};var P=t(51325);const S=()=>{const[e,o]=(0,a.useState)(!1),[t,p]=(0,a.useState)(!1),[f,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[v,b]=(0,a.useState)([]),[A,C]=(0,a.useState)(!1),[O,I]=(0,a.useState)([]),[S,D]=(0,a.useState)(""),[N,R]=(0,a.useState)(""),[W,T]=(0,a.useState)(""),z=(0,l.A)(),E=async()=>{x(null)},L=async()=>{T("")},U=[{field:"orderNumber",headerName:"ID",flex:1},{field:"username",headerName:"UserName",flex:1},{field:"email",headerName:"Email",flex:1},{field:"phoneNumber",headerName:"PhoneNumber",flex:1},{field:"roles",headerName:"Role",flex:1},{field:"departement",headerName:"Department",flex:1},{field:"userType",headerName:"User Type",flex:1},{field:"hospital",headerName:"Hospital Name",flex:1},{field:"actions",headerName:"Actions",width:150,renderCell:e=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.A,{onClick:()=>(async e=>{try{x(e.row),o(!0)}catch(t){console.error(t.message)}})(e),"aria-label":"edit",className:"text-info",children:(0,g.jsx)(n.A,{})}),(0,g.jsx)(s.A,{color:"danger",onClick:()=>(async e=>{m(!0),R(e.row.username),D(e.row.id)})(e),"aria-label":"delete",className:"text-danger",children:(0,g.jsx)(i.A,{})}),(0,g.jsx)(s.A,{color:"warning",onClick:()=>(async e=>{try{T(e.row.username),p(!0)}catch(o){console.error(o.message)}})(e),"aria-label":"reset password",className:"text-warnning",children:(0,g.jsx)(u.A,{})})]})}];(0,a.useEffect)((()=>{(async()=>{try{var e;const o=await j.A.get("/Admin/users"),t=(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.sort(((e,o)=>e.username.localeCompare(o.username)))).map(((e,o)=>(0,r.A)((0,r.A)({},e),{},{orderNumber:o+1})));b(t)}catch(o){console.error(o.message)}})()}),[A]),(0,a.useEffect)((()=>{(async()=>{try{var e;const o=await j.A.get("/Admin/roles");I(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.map((e=>e.name)))}catch(r){var o,t;console.error("fetchrole>>",r.message),k.oR.error((null===r||void 0===r||null===(o=r.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message)||"Internal Server Error on Role Fetch;")}})()}),[]);return(0,g.jsxs)("div",{className:"user-management-container",children:[(0,g.jsx)("h1",{className:"hed",children:"User Management"}),(0,g.jsx)(d.A,{variant:"contained",color:"light"===z.palette.mode?"primary":"secondary",startIcon:(0,g.jsx)(c.A,{}),onClick:()=>o(!0),children:"Add User"}),(0,g.jsx)(w,{isOpen:e,onClose:()=>o(!1),onSubmit:async e=>{try{const r=await j.A.post("/Admin/users",{username:e.username,email:e.email,password:e.password,phoneNumber:e.phone,userType:e.usertype,departement:e.department,hospital:e.hospital});var t;if(200===(null===r||void 0===r?void 0:r.status))k.oR.success(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message),C((e=>!e)),E(),o(!1)}catch(n){var r,a,l,s,d;if(console.error(n),Array.isArray(null===n||void 0===n||null===(r=n.response)||void 0===r?void 0:r.data))null===n||void 0===n||null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l||l.map((e=>k.oR.error(e.description)));else k.oR.error((null===n||void 0===n||null===(s=n.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"Internal Server Error.")}},onEdit:async e=>{try{const o=await j.A.post("/Admin/change-user-role",{userName:e.username,newRole:e.role});200===(null===o||void 0===o?void 0:o.status)&&(k.oR.success("Role Changed Success Fully!!"),C((e=>!e)),E())}catch(t){console.error(t.message),k.oR.error("Internal Server Error.")}finally{o(!1)}},userData:h,resetUserData:E,role:O}),(0,g.jsx)(y.A,{isOpen:f,onClose:()=>m(!1),userData:N,onConfirm:()=>(async()=>{try{const e=await j.A.delete("/Admin/users/".concat(S));200===e.status&&(k.oR.success(e.data.message),C((e=>!e)),m(!1))}catch(t){var e,o;console.error(t.message),k.oR.error(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)}finally{D(""),R("")}})()}),(0,g.jsx)(M,{open:t,onClose:()=>p(!1),username:W,onSubmit:async(e,o,t)=>{try{var r;const t=await j.A.post("/Admin/reset-password",{username:e,newPassword:o});k.oR.success(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message),L()}catch(s){var a,l;console.error(s.message),k.oR.error((null===s||void 0===s||null===(a=s.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||"Internal Server Error")}finally{p(!1)}},clearUserData:L}),(0,g.jsx)("div",{className:"data-grid-container",children:(0,g.jsx)(P.A,{rows:v,columns:U})}),(0,g.jsx)(k.N9,{})]})}},92342:()=>{},95540:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},98348:(e,o,t)=>{var r=t(24994);o.A=void 0;var a=r(t(40039)),l=t(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")}}]);
//# sourceMappingURL=1525.2034a63e.chunk.js.map