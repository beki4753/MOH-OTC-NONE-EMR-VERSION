"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[603,1525,5841,8222],{1223:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey")},16005:(e,o,r)=>{r.d(o,{A:()=>h});r(65043);var t=r(26240),a=r(57556),l=r(266),s=r(46946),d=r(94496),n=r(71716),i=r(72882),u=r(97334),c=r(74802),p=r(98348),f=r(70579);const m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,boxShadow:24,p:3,borderRadius:2,textAlign:"center"},h=e=>{let{isOpen:o,onClose:r,onConfirm:h,userData:x,userRole:v,loading:b}=e;const A=(0,t.A)();return(0,f.jsx)(a.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&r()},disableEscapeKeyDown:!0,closeAfterTransition:!0,BackdropComponent:l.A,BackdropProps:{timeout:500},"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:(0,f.jsxs)(s.A,{sx:m,bgcolor:"light"===A.palette.mode?A.palette.background.paper:A.palette.background.default,children:[(0,f.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,f.jsxs)(d.A,{variant:"h6",fontWeight:"bold",id:"confirmation-modal-title",sx:{color:e=>"light"===e.palette.mode?e.palette.primary.main:e.palette.info.light,display:"flex",alignItems:"center"},children:[(0,f.jsx)(p.A,{sx:{fontSize:28,mr:1}}),"Please Confirm"]}),(0,f.jsx)(n.A,{onClick:r,color:"error","aria-label":"close modal",children:(0,f.jsx)(c.A,{})})]}),(0,f.jsxs)(d.A,{variant:"body1",textAlign:"center",mt:2,id:"confirmation-modal-description",children:["Are you sure you want to delete the"," ",v?'role "'.concat(v,'"'):"user ",(0,f.jsx)("strong",{children:x}),"?"]}),(0,f.jsxs)(s.A,{display:"flex",justifyContent:"center",mt:3,children:[(0,f.jsx)(i.A,{variant:"contained",color:"light"===A.palette.mode?"primary":"secondary",onClick:()=>{h({userData:x,message:"Delete"})},sx:{mx:1},"aria-label":"confirm deletion",children:b?(0,f.jsx)(u.A,{size:24,color:"inherit"}):"Confirm"}),(0,f.jsx)(i.A,{variant:"outlined",color:"error",onClick:r,sx:{mx:1},"aria-label":"cancel deletion",children:"Cancel"})]})]})})}},50445:()=>{},57566:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},63471:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},74802:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},91525:(e,o,r)=>{r.r(o),r.d(o,{default:()=>S});var t=r(89379),a=r(65043),l=(r(50445),r(61976)),s=r(26240),d=r(71716),n=r(72882),i=r(95540),u=r(63471),c=r(1223),p=r(57566),f=r(57556),m=r(266),h=r(46946),x=r(94496),v=r(8591),b=r(42788),A=r(94814),k=r(74802),g=r(57488),C=r(70579);const y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:500,md:600},maxHeight:"90vh",overflowY:"auto",boxShadow:24,p:3,borderRadius:2},w=e=>{let{isOpen:o,onClose:r,onSubmit:l,userData:i,onEdit:u,resetUserData:c,role:p}=e;const[w,j]=(0,a.useState)({username:"",email:"",password:"",confirmpassword:"",phone:"",role:"",department:"",usertype:"",hospital:"DB Tena tabiya"}),[O,I]=(0,a.useState)(""),[M,P]=(0,a.useState)(""),[S,N]=(0,a.useState)(""),[D,R]=(0,a.useState)(""),T=(0,s.A)(),z=()=>{j({username:"",email:"",password:"",confirmpassword:"",phone:"",role:"",department:"",usertype:"",hospital:"DB Tena tabiya"}),R(""),P(""),I(""),c(),r()};(0,a.useEffect)((()=>{i&&j({username:(null===i||void 0===i?void 0:i.username)||"",email:(null===i||void 0===i?void 0:i.email)||"",password:"",confirmpassword:"",phone:(null===i||void 0===i?void 0:i.phoneNumber)||"",role:(null===i||void 0===i?void 0:i.role)||"",department:(null===i||void 0===i?void 0:i.departement)||"",usertype:(null===i||void 0===i?void 0:i.userType)||"",hospital:(null===i||void 0===i?void 0:i.hospital)||"DB Tena tabiya"})}),[i]);const E=e=>{j((0,t.A)((0,t.A)({},w),{},{[e.target.name]:e.target.value})),"email"===e.target.name&&U(e.target.value),"phone"===e.target.name&&W(e.target.value),"username"===e.target.name&&L(e.target.value),"confirmpassword"===e.target.name&&R("")},L=e=>{I(/^[A-Za-z][A-Za-z0-9]{3,}$/.test(e)?"":"Username must start with a letter and be at least 4 characters.")},U=e=>{P(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?"":"Invalid email format.")},W=e=>{/^(?:\+251|09|07)\d+$/.test(e)?e.startsWith("+251")&&13!==e.length?N("+251 numbers must be 13 digits."):(e.startsWith("09")||e.startsWith("07"))&&10!==e.length?N("09 or 07 numbers must be 10 digits."):N(""):N("Start with +251, 09, or 07 and use only digits.")};return(0,a.useEffect)((()=>{o||z()}),[o]),(0,C.jsx)(f.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&z()},disableEscapeKeyDown:!0,closeAfterTransition:!0,BackdropComponent:m.A,BackdropProps:{timeout:500},children:(0,C.jsxs)(h.A,{sx:y,bgcolor:"light"===T.palette.mode?T.palette.background.paper:T.palette.background.default,children:[(0,C.jsxs)(h.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,C.jsx)(x.A,{variant:"h6",children:i?"Edit User":"Add New User"}),(0,C.jsx)(d.A,{onClick:z,children:(0,C.jsx)(k.A,{})})]}),(0,C.jsxs)(h.A,{component:"form",onSubmit:e=>{if(e.preventDefault(),O||M||S)alert("Please fix the errors before submitting.");else{if(w.password!==w.confirmpassword)return void R("Passwords do not match.");if("Tsedey Bank"===w.department&&"Cashier"===w.usertype)return void g.oR.error("Bank can't have Cashier user type.");i?u(w):l(w)}},children:[(0,C.jsxs)(v.Ay,{container:!0,spacing:2,children:[(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{fullWidth:!0,label:"Username",name:"username",value:w.username,onChange:E,required:!0,disabled:!!i,error:!!O,helperText:O,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}}})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:w.email,onChange:E,required:!0,disabled:!!i,error:!!M,helperText:M,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}}})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,children:(0,C.jsx)(b.A,{fullWidth:!0,label:"Phone Number",name:"phone",type:"tel",value:w.phone,onChange:E,error:!!S,helperText:S,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}}})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{select:!0,fullWidth:!0,label:"User Type",name:"usertype",value:w.usertype,onChange:E,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}},children:["Cashier","Supervisor","Admin","MLT","Radiology","Doctor","Pharmacy"].map((e=>(0,C.jsx)(A.A,{value:e,children:e},e)))})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{select:!0,fullWidth:!0,label:"Department",name:"department",value:w.department,onChange:E,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}},children:["Card","Pharmacy","Hospital","Tsedey Bank","OPD 20","OPD 21","OPD 22","OPD 23","OPD 44","OPD 63","ANC","FAMILY PLANNING","DELIVERY","SURGICAL","NICU","ART"].map((e=>(0,C.jsx)(A.A,{value:e,children:e},e)))})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,children:(0,C.jsx)(b.A,{select:!0,fullWidth:!0,label:"Hospital Name",name:"hospital",value:w.hospital,onChange:E,disabled:!!i,required:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}},children:["DB Tena tabiya"].map((e=>(0,C.jsx)(A.A,{value:e,children:e},e)))})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{fullWidth:!0,label:"Password",name:"password",type:"password",value:w.password,onChange:E,required:!0,disabled:!!i,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}}})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,sm:6,children:(0,C.jsx)(b.A,{fullWidth:!0,label:"Confirm Password",name:"confirmpassword",type:"password",value:w.confirmpassword,onChange:E,required:!0,disabled:!!i,error:!!D,helperText:D,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}}})}),(0,C.jsx)(v.Ay,{item:!0,xs:12,children:(0,C.jsx)(b.A,{select:!0,fullWidth:!0,label:"Role",name:"role",value:i?w.role:"User",onChange:E,required:!0,disabled:!i,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===T.palette.mode?"#fff":"#000"},color:"dark"===T.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===T.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===T.palette.mode?"#fff":"#000"}}},children:p.map((e=>(0,C.jsx)(A.A,{value:e,children:e},e)))})})]}),(0,C.jsxs)(h.A,{display:"flex",justifyContent:"flex-end",mt:3,children:[(0,C.jsx)(n.A,{onClick:z,variant:"outlined",color:"error",sx:{mr:2},children:"Close"}),(0,C.jsx)(n.A,{type:"submit",variant:"contained",color:"light"===T.palette.mode?"primary":"secondary",children:i?"Save Changes":"Add User"})]})]})]})})};var j=r(16005),O=(r(92342),r(77265));const I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,padding:4,borderRadius:2,boxShadow:24},M={position:"absolute",top:10,right:10},P=e=>{let{open:o,onClose:r,username:l,onSubmit:i,clearUserData:u}=e;const[c,p]=(0,a.useState)(""),[m,v]=(0,a.useState)(""),[A,y]=(0,a.useState)(""),[w,j]=(0,a.useState)({newPassword:"",confirmPassword:""}),O=(0,s.A)();(0,a.useEffect)((()=>{o||S()}),[o]);const P=(e,o)=>{const r=[];o.length<6&&r.push("Passwords must be at least 6 characters."),/[^\w\s]/.test(o)||r.push("Passwords must have at least one non-alphanumeric character."),/[a-z]/.test(o)||r.push("Passwords must have at least one lowercase ('a'-'z')."),/[A-Z]/.test(o)||r.push("Passwords must have at least one uppercase ('A'-'Z')."),j((o=>(0,t.A)((0,t.A)({},o),{},{[e]:r.join(", ")})))},S=()=>{v(""),p(""),y(""),j({newPassword:"",confirmPassword:""}),u(),r()};return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(f.A,{open:o,onClose:(e,o)=>{"backdropClick"!==o&&"escapeKeyDown"!==o&&S()},children:(0,C.jsxs)(h.A,{sx:I,bgcolor:"light"===O.palette.mode?O.palette.background.paper:O.palette.background.default,children:[(0,C.jsx)(d.A,{sx:M,onClick:r,children:(0,C.jsx)(k.A,{})}),(0,C.jsxs)(x.A,{variant:"h6",gutterBottom:!0,children:["Set Password for ",(0,C.jsx)("strong",{children:l})]}),(0,C.jsx)(b.A,{label:"Username",fullWidth:!0,value:l,disabled:!0,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},color:"dark"===O.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===O.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===O.palette.mode?"#fff":"#000"}}}}),(0,C.jsx)(b.A,{label:"Password",type:"password",name:"newPassword",fullWidth:!0,value:c,onChange:e=>{p(e.target.value),P(e.target.name,e.target.value)},error:!!w.newPassword,helperText:w.newPassword,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},color:"dark"===O.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===O.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===O.palette.mode?"#fff":"#000"}}}}),(0,C.jsx)(b.A,{label:"Confirm Password",type:"password",name:"confirmPassword",fullWidth:!0,value:m,onChange:e=>{v(e.target.value),P(e.target.name,e.target.value)},error:!!w.confirmPassword,helperText:w.confirmPassword,sx:{marginBottom:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===O.palette.mode?"#fff":"#000"},color:"dark"===O.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===O.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===O.palette.mode?"#fff":"#000"}}}}),A&&(0,C.jsx)(x.A,{color:"error",variant:"body2",sx:{marginBottom:2},children:A}),(0,C.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsx)(n.A,{variant:"outlined",onClick:S,children:"Cancel"}),(0,C.jsx)(n.A,{variant:"contained",color:"light"===O.palette.mode?"primary":"secondary",onClick:()=>(()=>{if((null===c||void 0===c?void 0:c.length)<=0&&(null===m||void 0===m?void 0:m.length)<=0)return g.oR.error("Please fill the required fields."),void j({newPassword:"Please fill this field.",confirmPassword:"Please fill this field."});if(c===m){if(w.newPassword||w.confirmPassword)return void g.oR.error("Please fix the errors before submitting.");i(l,c,m),y(""),j({newPassword:"",confirmPassword:""})}else y("Passwords do not match!")})(),children:"Submit"})]})]})})})},S=()=>{const[e,o]=(0,a.useState)(!1),[r,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[x,v]=(0,a.useState)(null),[b,A]=(0,a.useState)([]),[k,y]=(0,a.useState)(!1),[I,M]=(0,a.useState)([]),[S,N]=(0,a.useState)(""),[D,R]=(0,a.useState)(""),[T,z]=(0,a.useState)(""),E=(0,s.A)(),L=async()=>{v(null)},U=async()=>{z("")},W=[{field:"orderNumber",headerName:"ID",flex:1},{field:"username",headerName:"UserName",flex:1},{field:"email",headerName:"Email",flex:1},{field:"phoneNumber",headerName:"PhoneNumber",flex:1},{field:"roles",headerName:"Role",flex:1},{field:"departement",headerName:"Department",flex:1},{field:"userType",headerName:"User Type",flex:1},{field:"hospital",headerName:"Hospital Name",flex:1},{field:"actions",headerName:"Actions",width:150,renderCell:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.A,{onClick:()=>(async e=>{try{v(e.row),o(!0)}catch(r){console.error(r.message)}})(e),"aria-label":"edit",className:"text-info",children:(0,C.jsx)(i.A,{})}),(0,C.jsx)(d.A,{color:"danger",onClick:()=>(async e=>{h(!0),R(e.row.username),N(e.row.id)})(e),"aria-label":"delete",className:"text-danger",children:(0,C.jsx)(u.A,{})}),(0,C.jsx)(d.A,{color:"warning",onClick:()=>(async e=>{try{z(e.row.username),f(!0)}catch(o){console.error(o.message)}})(e),"aria-label":"reset password",className:"text-warnning",children:(0,C.jsx)(c.A,{})})]})}];(0,a.useEffect)((()=>{(async()=>{try{var e;const o=await O.A.get("/Admin/users"),r=(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.sort(((e,o)=>e.username.localeCompare(o.username)))).map(((e,o)=>(0,t.A)((0,t.A)({},e),{},{orderNumber:o+1})));A(r)}catch(o){console.error(o.message)}})()}),[k]),(0,a.useEffect)((()=>{(async()=>{try{var e;const o=await O.A.get("/Admin/roles");M(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.map((e=>e.name)))}catch(t){var o,r;console.error("fetchrole>>",t.message),g.oR.error((null===t||void 0===t||null===(o=t.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"Internal Server Error on Role Fetch;")}})()}),[]);return(0,C.jsxs)("div",{className:"user-management-container",children:[(0,C.jsx)("h1",{className:"hed",children:"User Management"}),(0,C.jsx)(n.A,{variant:"contained",color:"light"===E.palette.mode?"primary":"secondary",startIcon:(0,C.jsx)(p.A,{}),onClick:()=>o(!0),children:"Add User"}),(0,C.jsx)(w,{isOpen:e,onClose:()=>o(!1),onSubmit:async e=>{try{const t=await O.A.post("/Admin/users",{username:e.username,email:e.email,password:e.password,phoneNumber:e.phone,userType:e.usertype,departement:e.department,hospital:e.hospital});var r;if(200===(null===t||void 0===t?void 0:t.status))g.oR.success(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message),y((e=>!e)),L(),o(!1)}catch(n){var t,a,l,s,d;if(console.error(n),Array.isArray(null===n||void 0===n||null===(t=n.response)||void 0===t?void 0:t.data))null===n||void 0===n||null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l||l.map((e=>g.oR.error(e.description)));else g.oR.error((null===n||void 0===n||null===(s=n.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"Internal Server Error.")}},onEdit:async e=>{try{const o=await O.A.post("/Admin/change-user-role",{userName:e.username,newRole:e.role});200===(null===o||void 0===o?void 0:o.status)&&(g.oR.success("Role Changed Success Fully!!"),y((e=>!e)),L())}catch(r){console.error(r.message),g.oR.error("Internal Server Error.")}finally{o(!1)}},userData:x,resetUserData:L,role:I}),(0,C.jsx)(j.A,{isOpen:m,onClose:()=>h(!1),userData:D,onConfirm:()=>(async()=>{try{const e=await O.A.delete("/Admin/users/".concat(S));200===e.status&&(g.oR.success(e.data.message),y((e=>!e)),h(!1))}catch(r){var e,o;console.error(r.message),g.oR.error(null===r||void 0===r||null===(e=r.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)}finally{N(""),R("")}})()}),(0,C.jsx)(P,{open:r,onClose:()=>f(!1),username:T,onSubmit:async(e,o,r)=>{try{var t;const r=await O.A.post("/Admin/reset-password",{username:e,newPassword:o});g.oR.success(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message),U()}catch(s){var a,l;console.error(s.message),g.oR.error((null===s||void 0===s||null===(a=s.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||"Internal Server Error")}finally{f(!1)}},clearUserData:U}),(0,C.jsx)("div",{className:"data-grid-container",children:(0,C.jsx)(l.z,{rows:b,columns:W,autoHeight:!0,sx:{minWidth:320}})}),(0,C.jsx)(g.N9,{})]})}},92342:()=>{},95540:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},98348:(e,o,r)=>{var t=r(24994);o.A=void 0;var a=t(r(40039)),l=r(70579);o.A=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")}}]);
//# sourceMappingURL=1525.41353d26.chunk.js.map