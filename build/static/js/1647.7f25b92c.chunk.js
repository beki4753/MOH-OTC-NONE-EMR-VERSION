"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[1647,5841,8222],{26353:(e,i,o)=>{o.d(i,{A:()=>f});var t=o(98587),r=o(58168),n=o(65043),l=o(58387),d=o(98610),s=o(94496),a=o(51347),c=o(98206),p=o(34535),u=o(28052),v=o(70579);const m=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],y=(0,p.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:o}=e;return[{["& .".concat(u.A.primary)]:i.primary},{["& .".concat(u.A.secondary)]:i.secondary},i.root,o.inset&&i.inset,o.primary&&o.secondary&&i.multiline,o.dense&&i.dense]}})((e=>{let{ownerState:i}=e;return(0,r.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},i.primary&&i.secondary&&{marginTop:6,marginBottom:6},i.inset&&{paddingLeft:56})})),f=n.forwardRef((function(e,i){const o=(0,c.b)({props:e,name:"MuiListItemText"}),{children:p,className:f,disableTypography:h=!1,inset:A=!1,primary:x,primaryTypographyProps:g,secondary:b,secondaryTypographyProps:j}=o,k=(0,t.A)(o,m),{dense:C}=n.useContext(a.A);let S=null!=x?x:p,P=b;const T=(0,r.A)({},o,{disableTypography:h,inset:A,primary:!!S,secondary:!!P,dense:C}),w=(e=>{const{classes:i,inset:o,primary:t,secondary:r,dense:n}=e,l={root:["root",o&&"inset",n&&"dense",t&&r&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,d.A)(l,u.b,i)})(T);return null==S||S.type===s.A||h||(S=(0,v.jsx)(s.A,(0,r.A)({variant:C?"body2":"body1",className:w.primary,component:null!=g&&g.variant?void 0:"span",display:"block"},g,{children:S}))),null==P||P.type===s.A||h||(P=(0,v.jsx)(s.A,(0,r.A)({variant:"body2",className:w.secondary,color:"text.secondary",display:"block"},j,{children:P}))),(0,v.jsxs)(y,(0,r.A)({className:(0,l.A)(w.root,f),ownerState:T,ref:i},k,{children:[S,P]}))}))},28884:(e,i,o)=>{o.d(i,{A:()=>n});var t=o(66734),r=o(70579);const n=(0,t.A)((0,r.jsx)("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutline")},29435:(e,i,o)=>{o.d(i,{A:()=>n});var t=o(66734),r=o(70579);const n=(0,t.A)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")},54007:(e,i,o)=>{o.d(i,{f:()=>t});const t=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{removePunctuation:o=!1,keepSpaces:t=!0}=i;return"string"!==typeof e&&(e=""),e.normalize("NFC").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(o?/[^\w\s]|_/g:"","").replace(/\s+/g,t?" ":"").trim()}},58293:(e,i,o)=>{o.d(i,{A:()=>n});var t=o(66734),r=o(70579);const n=(0,t.A)((0,r.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},71647:(e,i,o)=>{o.r(i),o.d(i,{default:()=>z});var t=o(89379),r=o(80045),n=o(65043),l=o(26240),d=o(65204),s=o(94496),a=o(42788),c=o(94814),p=o(8591),u=o(71716),v=o(97334),m=o(46946),y=o(72882),f=o(896),h=o(69570),A=o(29622),x=o(71062),g=o(80216),b=o(26353),j=o(28884),k=o(29435),C=o(58293),S=o(83560),P=o(77265),T=o(57488),w=(o(92342),o(54007)),M=o(70579);const I=["id"],R={type:"",descriptions:[]},O={type:"",descriptions:[""]},z=()=>{const e=(0,l.A)(),[i,o]=(0,n.useState)([]),[z,L]=(0,n.useState)([]),[N,E]=(0,n.useState)(null),[B,D]=(0,n.useState)(R),[_,F]=(0,n.useState)(O),[W,U]=(0,n.useState)(!1),[q,H]=(0,n.useState)({status:!1,on:""}),[V,X]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{try{var e;const l=await P.A.get("/Lookup/payment-type-description");var i,n;null!==l&&void 0!==l&&null!==(e=l.data)&&void 0!==e&&e.data&&o(null===(i=l.data.data)||void 0===i||null===(n=i.filter((e=>"all"!==(0,w.f)(null===e||void 0===e?void 0:e.type))))||void 0===n?void 0:n.map(((e,i)=>{let{id:o}=e,n=(0,r.A)(e,I);return(0,t.A)({id:i+1,mainId:o},n)})))}catch(l){console.error("Fetch error:",l),T.oR.error("Failed to load payment types")}})()}),[W]),(0,n.useEffect)((()=>{(async()=>{try{const o=await P.A.get("/Lookup/payment-type");var e,i;if(200===(null===o||void 0===o?void 0:o.status))L(null===o||void 0===o||null===(e=o.data)||void 0===e||null===(i=e.map((e=>null===e||void 0===e?void 0:e.type)))||void 0===i?void 0:i.filter((e=>"all"!==(0,w.f)(e))))}catch(o){console.error("This is fecth Payment Type error: ",o)}})()}),[]);const Y=(e,i)=>{const o=Array.isArray(null===_||void 0===_?void 0:_.descriptions)?[..._.descriptions]:[];return!/^[A-Za-z0-9._\-\s]{2,}$/.test(i)&&(null===i||void 0===i?void 0:i.length)>0?(o[e]="Use only letters, numbers, space, dot (.), dash (-), or underscore (_) \u2014 at least 2 characters.",F((e=>(0,t.A)((0,t.A)({},e),{},{descriptions:o}))),!1):(o[e]="",F((e=>(0,t.A)((0,t.A)({},e),{},{descriptions:o}))),!0)},Z=()=>{E(null),D(R),F(O)};return(0,M.jsxs)(d.A,{elevation:3,sx:{p:4,margin:2},children:[(0,M.jsx)(s.A,{variant:"h4",gutterBottom:!0,sx:{mb:4},children:"Payment Types Manager"}),(0,M.jsxs)(d.A,{elevation:2,sx:{p:3,mt:4,background:"dark"===e.palette.mode&&"#1f2a408a"},children:[(0,M.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:N?"Edit Payment Type":"Create New Payment Type"}),(0,M.jsx)(a.A,{fullWidth:!0,select:!0,label:"Payment Type",value:null===B||void 0===B?void 0:B.type,onChange:e=>D((i=>(0,t.A)((0,t.A)({},i),{},{type:e.target.value}))),sx:{mb:3},error:!(null===_||void 0===_||!_.type),helperText:null===_||void 0===_?void 0:_.type,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}},children:null===z||void 0===z?void 0:z.map(((e,i)=>(0,M.jsx)(c.A,{value:e,children:e},i)))}),B.descriptions.map(((i,o)=>(0,M.jsxs)(p.Ay,{container:!0,spacing:1,alignItems:"center",sx:{mb:2},children:[(0,M.jsx)(p.Ay,{item:!0,xs:10,children:(0,M.jsx)(a.A,{fullWidth:!0,label:"Description ".concat(o+1),value:(null===i||void 0===i?void 0:i.description)||"",onChange:e=>((e,i)=>{const o=[...B.descriptions];D((r=>(0,t.A)((0,t.A)({},r),{},{descriptions:null===o||void 0===o?void 0:o.map(((o,t)=>t===e?{id:o.id,description:i}:o))}))),Y(e,i)})(o,e.target.value),error:!(null===_||void 0===_||!_.descriptions[o]),helperText:null===_||void 0===_?void 0:_.descriptions[o],InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===e.palette.mode?"#fff":"#000"},color:"dark"===e.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===e.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===e.palette.mode?"#fff":"#000"}}}})}),(0,M.jsx)(p.Ay,{item:!0,xs:2,children:(0,M.jsx)(u.A,{onClick:()=>(async e=>{try{var i;if(null!==B&&void 0!==B&&null!==(i=B.descriptions)&&void 0!==i&&i.some((e=>null===e.description||void 0===e.description||""===e.description.toString().trim())))return T.oR.error("Please fill required fields."),void F((0,t.A)((0,t.A)({},_),{},{descriptions:"Please fill this field."}));if(null!==N){var o,r;H({status:!1,on:e});const i=null===B||void 0===B||null===(o=B.descriptions)||void 0===o?void 0:o.filter(((i,o)=>o===e)),d=await P.A.delete("/Lookup/payment-type-description",{headers:{"Content-Type":"application/json"},data:{id:null===(r=i[0])||void 0===r?void 0:r.id}});if(200===(null===d||void 0===d?void 0:d.status)){var n,l;if(1===B.descriptions.length)return T.oR.success((null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.msg)||"Removed Successfully."),D(R),U((e=>!e)),void E(null);T.oR.success((null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.msg)||"Removed Successfully."),D((i=>(0,t.A)((0,t.A)({},i),{},{descriptions:i.descriptions.filter(((i,o)=>o!==e))}))),U((e=>!e))}}else D((i=>(0,t.A)((0,t.A)({},i),{},{descriptions:i.descriptions.filter(((i,o)=>o!==e))})))}catch(a){var d,s;console.error("This is handle Remove Description error: ",a),T.oR.error((null===a||void 0===a||null===(d=a.response)||void 0===d||null===(s=d.data)||void 0===s?void 0:s.msg)||"Internal server error.")}finally{H({status:!1,on:e})}})(o),children:(null===q||void 0===q?void 0:q.on)===o?(0,M.jsx)(v.A,{size:24,color:"inherit"}):(0,M.jsx)(j.A,{color:"error"})})})]},o))),(0,M.jsxs)(m.A,{display:"flex",justifyContent:"space-between",mt:2,children:[(0,M.jsx)(y.A,{startIcon:(0,M.jsx)(k.A,{}),onClick:()=>{D((e=>(0,t.A)((0,t.A)({},e),{},{descriptions:[...e.descriptions,{id:null,description:""}]})))},variant:"outlined",color:"inherit",disabled:null!==N,children:"Add Description"}),(0,M.jsxs)(m.A,{children:[(0,M.jsx)(y.A,{variant:"outlined",color:"error",onClick:Z,sx:{mr:2},children:"Cancel"}),(0,M.jsx)(y.A,{variant:"contained",color:"light"===e.palette.mode?"primary":"secondary",onClick:async()=>{try{var e,i,o,r,n,l;X(!0);const p={type:null===B||void 0===B?void 0:B.type,discription:N?null===B||void 0===B||null===(e=B.descriptions)||void 0===e?void 0:e.filter((e=>{var i;return""!==(null===e||void 0===e||null===(i=e.description)||void 0===i?void 0:i.trim())})):null===B||void 0===B||null===(i=B.descriptions)||void 0===i||null===(o=i.filter((e=>{var i;return""!==(null===e||void 0===e||null===(i=e.description)||void 0===i?void 0:i.trim())})))||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.description))};if((null===B||void 0===B||null===(r=B.type)||void 0===r?void 0:r.length)<=0||null!==B&&void 0!==B&&null!==(n=B.descriptions)&&void 0!==n&&n.some((e=>null===e.description||void 0===e.description||""===e.description.toString().trim()))){var d,s,a;if(T.oR.error("Pleas fill required fields."),(null===B||void 0===B||null===(d=B.type)||void 0===d?void 0:d.length)<=0&&F((0,t.A)((0,t.A)({},_),{},{type:"Please fill this field."})),null!==B&&void 0!==B&&null!==(s=B.descriptions)&&void 0!==s&&s.some((e=>null===e.description||void 0===e.description||""===e.description.toString().trim())))F((0,t.A)((0,t.A)({},_),{},{descriptions:null===B||void 0===B||null===(a=B.descriptions)||void 0===a?void 0:a.map((()=>"Please fill this field."))}));return}if(null!==_&&void 0!==_&&_.type||null!==_&&void 0!==_&&null!==(l=_.descriptions)&&void 0!==l&&l.some((e=>(null===e||void 0===e?void 0:e.length)>0)))return void T.oR.error("Please fix the error first.");if(N){const e=await Promise.all(null===B||void 0===B?void 0:B.descriptions.map((e=>P.A.put("/Lookup/payment-type-description/",{id:null===e||void 0===e?void 0:e.id,discription:null===e||void 0===e?void 0:e.description}))));let i=!1;null===e||void 0===e||e.forEach(((e,o)=>{var t;200===(null===e||void 0===e?void 0:e.status)&&(i=!0,T.oR.success((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg)||"Description ".concat(o+1," updated.")))})),i&&(U((e=>!e)),Z(),E(null))}else{const e=await P.A.post("/Lookup/payment-type-description",p);var c;if(201===(null===e||void 0===e?void 0:e.status))U((e=>!e)),Z(),T.oR.success((null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.msg)||(N?"Updated successfully":"Created successfully"))}}catch(v){var p,u;console.error("Submit error:",v),T.oR.error((null===v||void 0===v||null===(p=v.response)||void 0===p||null===(u=p.data)||void 0===u?void 0:u.msg)||"Operation failed")}finally{X(!1)}},disabled:!B.type||B.descriptions.every((e=>{var i;return""===(null===e||void 0===e||null===(i=e.description)||void 0===i?void 0:i.trim())||null===(null===e||void 0===e?void 0:e.description)})),children:V?(0,M.jsx)(v.A,{size:24,color:"inherit"}):N?"Update":"Create"})]})]})]}),(0,M.jsx)("div",{style:{marginTop:"40px"},children:i.map((i=>(0,M.jsxs)(f.A,{sx:{background:"dark"===e.palette.mode?"linear-gradient(45deg, #1f2a40 30%, #2c3a58 90%)":"linear-gradient(45deg, #f8f9fa 30%, #ffffff 90%)",borderRadius:"12px !important",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:e.shadows[2],"&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[6]},"&:before":{display:"none"},"&.Mui-expanded":{margin:"16px 0",transform:"scale(1.005)"},mb:2},children:[(0,M.jsx)(h.A,{expandIcon:(0,M.jsx)(C.A,{sx:{color:e.palette.text.secondary}}),sx:{transition:"background 0.2s ease","&:hover":{background:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"},"& .MuiAccordionSummary-content":{alignItems:"center",py:2}},children:(0,M.jsxs)(p.Ay,{container:!0,alignItems:"center",children:[(0,M.jsx)(p.Ay,{item:!0,xs:10,children:(0,M.jsx)(s.A,{variant:"h6",sx:{fontWeight:600,letterSpacing:"0.5px",position:"relative","&:after":{content:'""',position:"absolute",bottom:-8,left:0,width:"40px",height:"3px",background:e.palette.primary.main,transition:"all 0.3s ease",opacity:0}},children:i.type})}),(0,M.jsx)(p.Ay,{item:!0,xs:2,textAlign:"right",children:(0,M.jsx)(u.A,{onClick:e=>{e.stopPropagation(),(e=>{var i;E(e.mainId),D({type:e.type,descriptions:(null===e||void 0===e||null===(i=e.description)||void 0===i?void 0:i.length)>0||null!==(null===e||void 0===e?void 0:e.description)?null===e||void 0===e?void 0:e.description:[{id:null,description:""}]})})(i)},sx:{transform:"scale(0.9)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",background:"dark"===e.palette.mode?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}},children:(0,M.jsx)(S.A,{fontSize:"small"})})})]})}),(0,M.jsx)(A.A,{sx:{pt:0},children:(0,M.jsx)(x.A,{sx:{background:"dark"===e.palette.mode?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.5)",borderRadius:"8px",py:0},children:i.description.map(((i,o)=>(0,M.jsx)(g.Ay,{sx:{transition:"all 0.2s ease","&:hover":{transform:"translateX(8px)",background:"dark"===e.palette.mode?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"},"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.divider)}},children:(0,M.jsx)(b.A,{primary:i.description||"No description",primaryTypographyProps:{sx:{position:"relative","&:before":{content:'"\u2022"',color:"light"===e.palette.mode?e.palette.primary.main:e.palette.secondary.main,mr:1.5,fontSize:"1.2rem"}}}})},i.id||o)))})})]},i.id)))}),(0,M.jsx)(T.N9,{})]})}},83560:(e,i,o)=>{o.d(i,{A:()=>n});var t=o(66734),r=o(70579);const n=(0,t.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},92342:()=>{}}]);
//# sourceMappingURL=1647.7f25b92c.chunk.js.map