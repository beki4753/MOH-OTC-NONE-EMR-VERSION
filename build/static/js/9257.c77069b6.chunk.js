"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[603,5841,8222,9257],{9092:(e,t,i)=>{i.d(t,{A:()=>h});i(65043);var o=i(26240),r=i(83462),n=i(4219),a=i(71716),l=i(97368),d=i(46946),s=i(94496),u=i(92064),c=i(72882),v=i(74802),m=i(61976),f=i(9551),p=i(70579);function h(e){var t,i;let{open:h,onClose:x,rows:g}=e;const b=(0,o.A)(),A=(null===g||void 0===g||null===(t=g[0])||void 0===t?void 0:t.patientCardNumber)||"",C=(null===g||void 0===g||null===(i=g[0])||void 0===i?void 0:i.patientFName)||"",k=[{field:"catagory",headerName:"Category",flex:1,minWidth:120},{field:"service",headerName:"Services",flex:1,minWidth:120},{field:"amount",headerName:"Amount",flex:1,minWidth:120,renderCell:e=>{var t;return(0,f.formatAccounting2)(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.amount)}}];return(0,p.jsxs)(r.A,{open:h,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&x()},maxWidth:"md",fullWidth:!0,scroll:"paper",disableEnforceFocus:!0,children:[(0,p.jsxs)(n.A,{sx:{m:0,p:2},children:["Payment Detail",(0,p.jsx)(a.A,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:8,color:b.palette.grey[500]},children:(0,p.jsx)(v.A,{})})]}),(0,p.jsxs)(l.A,{dividers:!0,sx:{height:{xs:"60vh",sm:"70vh",md:"60vh"}},children:[(0,p.jsxs)(d.A,{sx:{mb:2,p:2,backgroundColor:"light"===b.palette.mode?b.palette.grey[100]:b.palette.grey[700],borderRadius:1,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",gap:2},children:[(0,p.jsxs)(s.A,{variant:"subtitle1",children:[(0,p.jsx)("strong",{children:"Card Number:"})," ",A]}),(0,p.jsxs)(s.A,{variant:"subtitle1",children:[(0,p.jsx)("strong",{children:"Patient Name:"})," ",C]})]}),(0,p.jsx)(m.z,{rows:g||[],columns:k,autoHeight:!0,disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-columnHeaders":{backgroundColor:b.palette.action.hover},"& .MuiDataGrid-row:nth-of-type(odd)":{backgroundColor:b.palette.action.selected},minWidth:320}})]}),(0,p.jsx)(u.A,{children:(0,p.jsx)(c.A,{onClick:()=>x(),variant:"contained",color:"secondary",children:"Cancel"})})]})}},56937:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var o=i(80045),r=i(89379),n=i(65043),a=i(26240),l=i(46946),d=i(65204),s=i(94496),u=i(8591),c=i(42788),v=i(56894),m=i(97334),f=i(94814),p=i(39336),h=i(71716),x=i(72882),g=i(51387),b=i(70141),A=i(57488),C=i(77265),k=i(83074),y=i(27073),j=i.n(y),N=i(9551),O=i(61976),M=i(48292),D=i(9092),I=i(70579);const P=["patientFirstName","patientMiddleName","patientLastName"],w=["services"],q={services:[],patientCardNumber:"",patientName:"",medicationUse:"",admissionDate:"",dischargeDate:"",patientCondition:""},R=(e,t)=>{if("Reset"===t.name)return q;if("services"===t.org){const i=[...e.services||[]];i[t.index]||(i[t.index]={name:"",quantity:"",unitCost:""});const o=i.map(((e,i)=>i===t.index?(0,r.A)((0,r.A)({},e),{},{[t.name]:t.values}):e));return(0,r.A)((0,r.A)({},e),{},{services:o})}return"Add Services"===t.name?(0,r.A)((0,r.A)({},e),{},{services:[...(null===e||void 0===e?void 0:e.services)||[],{name:"",quantity:"",unitCost:""}]}):"Remove Services"===t.name?(0,r.A)((0,r.A)({},e),{},{services:(e.services||[]).filter(((e,i)=>i!==t.index))}):(0,r.A)((0,r.A)({},e),{},{[t.name]:t.values})},W=()=>{var e,t;const i=(0,a.A)(),[y,W]=(0,n.useState)(q),[S,T]=(0,n.useReducer)(R,q),[U,F]=(0,n.useState)(!1),[L,B]=(0,n.useState)(!1),[z,E]=(0,n.useState)([]),[G,H]=(0,n.useState)(!1),[Y,Z]=(0,n.useState)(!1),[$,_]=(0,n.useState)([]);(0,n.useEffect)((()=>{(async()=>{try{const i=await C.A.put("/Patient/get-nurse-request",{});if(200===(null===i||void 0===i?void 0:i.status)){var e,t;const n=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.length)>0?null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.map(((e,t)=>{let{patientFirstName:i,patientMiddleName:n,patientLastName:a}=e,l=(0,o.A)(e,P);return(0,r.A)({patientFName:"".concat(i," ").concat(n," ").concat(a),id:t+1},l)})):[];E(null===n||void 0===n?void 0:n.sort(((e,t)=>new Date(t.createdOn)-new Date(e.createdOn))))}}catch(i){console.error("This is fetch data error: ",i)}})()}),[G]);const K=[{field:"patientCardNumber",headerName:"Card No",flex:1},{field:"patientFName",headerName:"Patient Name",flex:1},{field:"patientGender",headerName:"Gender",flex:1},{field:"totalPrice",headerName:"Total",flex:1,renderCell:e=>{var t;return(0,N.formatAccounting2)(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.totalPrice)}},{field:"paid",headerName:"Paid",flex:1,renderCell:e=>e.value?"\u2705":"\u274c"},{field:"createdBy",headerName:"Created By",width:100},{field:"createdOn",headerName:"Created On",flex:1,renderCell:e=>{var t;return(0,M.renderETDateAtCell)(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.createdOn)}}],Q=(e,t)=>{if("dischargeDate"===e){const i=null===y||void 0===y?void 0:y.admissionDate;if(i&&t<i)return W((i=>(0,r.A)((0,r.A)({},i),{},{[e]:t}))),void T({name:e,values:"Discharge date cannot be before admission date (".concat((0,M.renderETDateAtCell)(i),")")})}W((i=>(0,r.A)((0,r.A)({},i),{},{[e]:t}))),T({name:e,values:""})},J=(e,t)=>{var i,o,n;if("patientCardNumber"===e.target.name)return W((0,r.A)((0,r.A)({},y),{},{patientName:"",[e.target.name]:e.target.value})),o=e.target.name,n=e.target.value,void(!/^[0-9]{5,}$/.test(n)&&(null===n||void 0===n?void 0:n.length)>0?T({name:o,values:"Please insert a valid MRN (at least 5 digits, numbers only)."}):T({name:o,values:""}));if(null!==(i=["quantity","unitCost","name"])&&void 0!==i&&i.includes(e.target.name)){var a;const i=[...null===y||void 0===y?void 0:y.services];return i[t][e.target.name]="name"!==e.target.name&&(null===(a=e.target.value)||void 0===a?void 0:a.length)>0?parseFloat(Math.abs(e.target.value)):e.target.value,W((e=>(0,r.A)((0,r.A)({},e),{},{services:i}))),void("name"===e.target.name?V(t,e.target.name,e.target.value):X(t,e.target.name,e.target.value))}return"medicationUse"===e.target.name?(W((0,r.A)((0,r.A)({},y),{},{[e.target.name]:"Yes"===e.target.value||"No"!==e.target.value&&null})),void T({name:e.target.name,values:""})):("patientCondition"===e.target.name&&ee(e.target.name,e.target.value),"patientName"===e.target.name?(W((0,r.A)((0,r.A)({},y),{},{[e.target.name]:e.target.value})),void T({name:e.target.name,values:""})):void W((0,r.A)((0,r.A)({},y),{},{[e.target.name]:e.target.value})))},V=(e,t,i)=>{!/^[A-Za-z\s]+$/.test(i)&&(null===i||void 0===i?void 0:i.length)>0?T({name:t,index:e,values:"Only letters and spaces allowed.",org:"services"}):T({name:t,index:e,values:"",org:"services"})},X=(e,t,i)=>{const o=Number(i);T(0===o?{org:"services",index:e,name:t,values:"Zero value is not allowed."}:{org:"services",index:e,name:t,values:""})},ee=(e,t)=>{!/^[A-Za-z\s]+$/.test(t)&&(null===t||void 0===t?void 0:t.length)>0?T({name:e,values:"Only letters and spaces allowed."}):T({name:e,values:""})},te=(null===y||void 0===y||null===(e=y.services)||void 0===e?void 0:e.length)>0?null===y||void 0===y||null===(t=y.services)||void 0===t?void 0:t.reduce(((e,t)=>e+t.quantity*t.unitCost),0):0;(0,n.useEffect)((()=>{if(null!==y&&void 0!==y&&y.admissionDate&&null!==y&&void 0!==y&&y.dischargeDate){const e=((e,t)=>{const i=new Date(e),o=new Date(t)-i,r=Math.ceil(o/864e5)+1;return r>0?r:1})(null===y||void 0===y?void 0:y.admissionDate,null===y||void 0===y?void 0:y.dischargeDate);W((t=>{const i=[...t.services||[]],o=i.findIndex((e=>"Bed"===e.name));return-1!==o?i[o]=(0,r.A)((0,r.A)({},i[o]),{},{quantity:e}):i.unshift({name:"Bed",quantity:e,unitCost:0}),(0,r.A)((0,r.A)({},t),{},{services:i})}))}else null!==y&&void 0!==y&&y.admissionDate&&null!==y&&void 0!==y&&y.dischargeDate||W((e=>{var t;return(0,r.A)((0,r.A)({},e),{},{services:(null===(t=e.services)||void 0===t?void 0:t.filter((e=>"Bed"!==e.name)))||[]})}))}),[null===y||void 0===y?void 0:y.admissionDate,null===y||void 0===y?void 0:y.dischargeDate]);return(0,I.jsxs)(l.A,{sx:{backgroundColor:"light"===i.palette.mode?"#f5f7fb":i.palette.background.default,minHeight:"100vh",py:6,px:{xs:2,sm:4,md:6}},children:[(0,I.jsxs)(d.A,{elevation:6,sx:{p:{xs:3,sm:5,md:6},borderRadius:4,backgroundColor:i.palette.background.paper},children:[(0,I.jsx)(s.A,{variant:"h4",fontWeight:700,textAlign:"center",gutterBottom:!0,children:"Patient Discharge Summary"}),(0,I.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,I.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,I.jsx)(c.A,{label:"Card / MRN Number",fullWidth:!0,required:!0,name:"patientCardNumber",value:null===y||void 0===y?void 0:y.patientCardNumber,onChange:J,onBlurCapture:async()=>{var e;if((null===y||void 0===y||null===(e=y.patientName)||void 0===e?void 0:e.length)<=0)try{var t,i;if(F(!0),(null===S||void 0===S||null===(t=S.patientCardNumber)||void 0===t?void 0:t.length)<=0&&(null===y||void 0===y||null===(i=y.patientCardNumber)||void 0===i?void 0:i.length)>0){const e=await(0,k.rA)(null===y||void 0===y?void 0:y.patientCardNumber);(null===e||void 0===e?void 0:e.length)>0?W((t=>(0,r.A)((0,r.A)({},t),{},{patientName:e}))):A.oR.error("Card Number Not Registered.")}}catch(o){console.error("Failed to fetch patient data:",o),A.oR.error("Failed to fetch patient data."),W((e=>(0,r.A)((0,r.A)({},e),{},{patientName:""})))}finally{F(!1)}},error:!(null===S||void 0===S||!S.patientCardNumber),helperText:null===S||void 0===S?void 0:S.patientCardNumber,InputProps:{endAdornment:(0,I.jsx)(v.A,{position:"end",children:U&&(0,I.jsx)(m.A,{size:24})}),sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})}),(0,I.jsx)(u.Ay,{item:!0,xs:12,md:5,children:(0,I.jsx)(c.A,{label:"Patient Name",fullWidth:!0,required:!0,name:"patientName",value:null===y||void 0===y?void 0:y.patientName,onChange:J,error:!(null===S||void 0===S||!S.patientName),helperText:null===S||void 0===S?void 0:S.patientName,disabled:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-disabled":{color:"rgba(41, 225, 48, 0.71)",fontWeight:"bold"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})}),(0,I.jsx)(u.Ay,{item:!0,xs:12,md:3,children:(0,I.jsxs)(c.A,{select:!0,label:"Medication Use",name:"medicationUse",fullWidth:!0,required:!0,value:null===(null===y||void 0===y?void 0:y.medicationUse)||""===(null===y||void 0===y?void 0:y.medicationUse)?"":null!==y&&void 0!==y&&y.medicationUse?"Yes":"No",error:!(null===S||void 0===S||!S.medicationUse),helperText:null===S||void 0===S?void 0:S.medicationUse,onChange:J,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}},children:[(0,I.jsx)(f.A,{value:"",children:"-- Select --"}),(0,I.jsx)(f.A,{value:"Yes",children:"Yes"}),(0,I.jsx)(f.A,{value:"No",children:"No"})]})}),(0,I.jsx)(u.Ay,{item:!0,xs:6,md:3,children:(0,I.jsx)(j(),{label:"Date of Admission",name:"admissionDate",fullWidth:!0,required:!0,value:null!==y&&void 0!==y&&y.admissionDate?new Date(null===y||void 0===y?void 0:y.admissionDate):null,onChange:e=>Q("admissionDate",e),error:!(null===S||void 0===S||!S.admissionDate),helperText:null===S||void 0===S?void 0:S.admissionDate,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}},(null===y||void 0===y?void 0:y.admissionDate)||"admissionDate-date")}),(0,I.jsx)(u.Ay,{item:!0,xs:6,md:3,children:(0,I.jsx)(j(),{label:"Date of Discharge",name:"dischargeDate",fullWidth:!0,required:!0,value:null!==y&&void 0!==y&&y.dischargeDate?new Date(null===y||void 0===y?void 0:y.dischargeDate):null,onChange:e=>Q("dischargeDate",e),error:!(null===S||void 0===S||!S.dischargeDate),helperText:null===S||void 0===S?void 0:S.dischargeDate,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}},(null===y||void 0===y?void 0:y.dischargeDate)||"dischargeDate-date")}),(0,I.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,I.jsx)(c.A,{label:"Patient Condition (e.g., Discharged / Death)",name:"patientCondition",fullWidth:!0,required:!0,value:null===y||void 0===y?void 0:y.patientCondition,onChange:J,error:!(null===S||void 0===S||!S.patientCondition),helperText:null===S||void 0===S?void 0:S.patientCondition,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})})]}),(0,I.jsx)(p.A,{sx:{my:4}}),(0,I.jsx)(s.A,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Services Provided"}),null===y||void 0===y?void 0:y.services.map(((e,t)=>{var o,n,a,l,d,v;return(0,I.jsxs)(u.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mb:1,px:2,py:1.5,backgroundColor:i.palette.action.hover,borderRadius:2},children:[(0,I.jsx)(u.Ay,{item:!0,xs:12,sm:5,md:4,children:(0,I.jsx)(c.A,{label:"Service Name",name:"name",fullWidth:!0,required:!0,value:null===e||void 0===e?void 0:e.name,onChange:e=>J(e,t),error:!(null===S||void 0===S||null===(o=S.services[t])||void 0===o||!o.name),helperText:null===S||void 0===S||null===(n=S.services[t])||void 0===n?void 0:n.name,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})}),(0,I.jsx)(u.Ay,{item:!0,xs:4,sm:2,children:(0,I.jsx)(c.A,{label:"Qty",type:"number",name:"quantity",required:!0,fullWidth:!0,inputProps:{min:0},onWheel:e=>e.target.blur(),value:null===e||void 0===e?void 0:e.quantity,onChange:e=>J(e,t),error:!(null===S||void 0===S||null===(a=S.services[t])||void 0===a||!a.quantity),helperText:null===S||void 0===S||null===(l=S.services[t])||void 0===l?void 0:l.quantity,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})}),(0,I.jsx)(u.Ay,{item:!0,xs:4,sm:2,children:(0,I.jsx)(c.A,{label:"Unit Cost",type:"number",name:"unitCost",required:!0,fullWidth:!0,onWheel:e=>e.target.blur(),value:null===e||void 0===e?void 0:e.unitCost,onChange:e=>J(e,t),error:!(null===S||void 0===S||null===(d=S.services[t])||void 0===d||!d.unitCost),helperText:null===S||void 0===S||null===(v=S.services[t])||void 0===v?void 0:v.unitCost,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===i.palette.mode?"#fff":"#000"},color:"dark"===i.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===i.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===i.palette.mode?"#fff":"#000"}}}})}),(0,I.jsx)(u.Ay,{item:!0,xs:4,sm:2,children:(0,I.jsxs)(s.A,{fontWeight:500,children:[(0,N.formatAccounting)((null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e?void 0:e.unitCost))," \u1265\u122d"]})}),(0,I.jsx)(u.Ay,{item:!0,xs:12,sm:1,children:(0,I.jsx)(h.A,{color:"error",onClick:()=>(e=>{const t=[...null===y||void 0===y?void 0:y.services];W((i=>(0,r.A)((0,r.A)({},i),{},{services:t.filter(((t,i)=>i!==e))}))),T({name:"Remove Services",index:e})})(t),children:(0,I.jsx)(g.A,{})})})]},t)})),(0,I.jsx)(x.A,{startIcon:(0,I.jsx)(b.A,{}),onClick:()=>{W((e=>(0,r.A)((0,r.A)({},e),{},{services:[...(null===e||void 0===e?void 0:e.services)||[],{name:"",quantity:"",unitCost:""}]}))),T({name:"Add Services"})},color:"light"===i.palette.mode?"primary":"secondary",variant:"outlined",sx:{my:2,textTransform:"none",borderStyle:"dashed",fontWeight:500},children:"Add Service"}),(0,I.jsx)(l.A,{display:"flex",justifyContent:"flex-end",sx:{my:3},children:(0,I.jsx)(x.A,{variant:"outlined",color:"error",onClick:()=>{W(q),T({name:"Reset"})},children:"Cancel"})}),(0,I.jsx)(p.A,{sx:{my:3}}),(0,I.jsx)(l.A,{display:"flex",justifyContent:"flex-end",sx:{mb:3},children:(0,I.jsxs)(s.A,{variant:"h6",fontWeight:"bold",children:["Total: ",(0,N.formatAccounting)(te)," \u1265\u122d"]})}),(0,I.jsx)(x.A,{variant:"contained",color:"primary",fullWidth:!0,size:"large",onClick:async()=>{try{var e;B(!0);const t=Object.entries(y||{}).filter((e=>{let[t]=e;return"services"!==t}));if(Object.entries(S||{}).filter((e=>{let[t]=e;return"services"!==t})).some((e=>{let[t,i]=e;return(null===i||void 0===i?void 0:i.length)>0})))return void A.oR.error("Please first fix the error.");if(((null===S||void 0===S?void 0:S.services)||[]).some((e=>Object.values(e||{}).some((e=>(null===e||void 0===e?void 0:e.length)>0)))))return void A.oR.error("Please fix errors in service fields.");if(t.some((e=>{let[t,i]=e;return!i||(null===i||void 0===i?void 0:i.length)<=0})))return A.oR.error("Please fill the required fields."),void t.forEach((e=>{let[t,i]=e;(!i||i.length<=0)&&T({name:t,values:"Please fill this field"})}));if((null===y||void 0===y||null===(e=y.services)||void 0===e?void 0:e.length)<=0)return void A.oR.error("Please insert at least one service.");if(((null===y||void 0===y?void 0:y.services)||[]).some(((e,t)=>Object.entries(e||{}).some((e=>{let[i,o]=e;const r=!o||(null===o||void 0===o?void 0:o.length)<=0;return r&&T({org:"services",index:t,name:i,values:"Please fill this field"}),r})))))return void A.oR.error("Please insert at least one valid service.");const i={patientCardNumber:"".concat(Number(null===y||void 0===y?void 0:y.patientCardNumber)),dischargeDate:null===y||void 0===y?void 0:y.dischargeDate,admissionDate:null===y||void 0===y?void 0:y.admissionDate,hasMedication:null===y||void 0===y?void 0:y.medicationUse,patientCondition:null===y||void 0===y?void 0:y.patientCondition,services:null===y||void 0===y?void 0:y.services.map((e=>({service:e.name,amount:e.quantity,price:e.unitCost})))},o=await C.A.post("/Patient/add-nurse-request",i);200===(null===o||void 0===o?void 0:o.status)&&(H((e=>!e)),W(q),T({name:"Reset"}),A.oR.success("Submitted Successfully."))}catch(t){console.error("Submission failed:",t),A.oR.error("Failed to submit. Please try again.")}finally{B(!1)}},sx:{py:1.5,fontWeight:600},children:L?(0,I.jsx)(m.A,{size:24,color:"inherit"}):"Submit to Cashier"}),(0,I.jsx)(p.A,{sx:{mb:4}}),(0,I.jsx)(s.A,{variant:"h4",fontWeight:700,textAlign:"center",gutterBottom:!0,children:"Sent Requests"}),(0,I.jsx)(d.A,{elevation:6,sx:{borderRadius:4,backgroundColor:i.palette.background.paper,mt:5},children:(0,I.jsx)(O.z,{rows:z,columns:K,autoHeight:!0,sx:{backgroundColor:i.palette.background.default,borderRadius:2,minWidth:320},onRowDoubleClick:e=>{try{var t;const i=null===(t=e.row.rquestedServices||[])||void 0===t?void 0:t.map((e=>{let{services:t}=e,i=(0,o.A)(e,w);return(0,r.A)((0,r.A)({service:t},i),{},{catagory:"Used Service"})}));Z(!0);const n=i.length>0?i.map(((t,i)=>(0,r.A)({id:i+1,patientFName:e.row.patientFName,patientCardNumber:e.row.patientCardNumber},t))):[];_(n)}catch(i){console.error("Double-click error: ",i),A.oR.error("Unable to open Detail Data.")}},localeText:{noRowsLabel:"No Nurse Request"}})})]}),(0,I.jsx)(D.A,{open:Y,onClose:()=>{Z(!1),_([])},rows:$}),(0,I.jsx)(A.N9,{})]})}},74802:(e,t,i)=>{var o=i(24994);t.A=void 0;var r=o(i(40039)),n=i(70579);t.A=(0,r.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);
//# sourceMappingURL=9257.c77069b6.chunk.js.map