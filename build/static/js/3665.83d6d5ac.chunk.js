"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[603,3665,5841,8222],{19252:(e,t,a)=>{a.d(t,{A:()=>C});var o=a(98587),r=a(58168),n=a(65043),s=a(58387),i=a(72372),d=a(98610),l=a(67598),c=a(52900),u=a(46060),p=a(80315),m=a(70579);const h=["className","component","disableGutters","fixed","maxWidth","classes"],f=(0,p.A)(),g=(0,u.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["maxWidth".concat((0,l.A)(String(a.maxWidth)))],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),x=e=>(0,c.A)({props:e,name:"MuiContainer",defaultTheme:f});var v=a(6803),y=a(34535),A=a(98206);const b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=g,useThemeProps:a=x,componentName:c="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:a}=e;return a.fixed&&Object.keys(t.breakpoints.values).reduce(((e,a)=>{const o=a,r=t.breakpoints.values[o];return 0!==r&&(e[t.breakpoints.up(o)]={maxWidth:"".concat(r).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({},"xs"===a.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},a.maxWidth&&"xs"!==a.maxWidth&&{[t.breakpoints.up(a.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[a.maxWidth]).concat(t.breakpoints.unit)}})})),p=n.forwardRef((function(e,t){const n=a(e),{className:p,component:f="div",disableGutters:g=!1,fixed:x=!1,maxWidth:v="lg"}=n,y=(0,o.A)(n,h),A=(0,r.A)({},n,{component:f,disableGutters:g,fixed:x,maxWidth:v}),b=((e,t)=>{const{classes:a,fixed:o,disableGutters:r,maxWidth:n}=e,s={root:["root",n&&"maxWidth".concat((0,l.A)(String(n))),o&&"fixed",r&&"disableGutters"]};return(0,d.A)(s,(e=>(0,i.Ay)(t,e)),a)})(A,c);return(0,m.jsx)(u,(0,r.A)({as:f,ownerState:A,className:(0,s.A)(b.root,p),ref:t},y))}));return p}({createStyledComponent:(0,y.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["maxWidth".concat((0,v.A)(String(a.maxWidth)))],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,A.b)({props:e,name:"MuiContainer"})}),C=b},33086:(e,t,a)=>{a.d(t,{A:()=>n});var o=a(66734),r=a(70579);const n=(0,o.A)([(0,r.jsx)("path",{d:"M3 19.1h18V4.95H3zm5-9.74 1.41-1.41L12 10.54l2.59-2.59L16 9.36l-2.59 2.59L16 14.54l-1.41 1.41L12 13.36l-2.59 2.59L8 14.54l2.59-2.59z",opacity:".3"},"0"),(0,r.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H3V5h18zM9.41 15.95 12 13.36l2.59 2.59L16 14.54l-2.59-2.59L16 9.36l-1.41-1.41L12 10.54 9.41 7.95 8 9.36l2.59 2.59L8 14.54z"},"1")],"CancelPresentationTwoTone")},51387:(e,t,a)=>{a.d(t,{A:()=>n});var o=a(66734),r=a(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},51425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var o=a(89379),r=a(80045),n=a(65043),s=a(26240),i=a(72882),d=a(71716),l=a(19252),c=a(94496),u=a(46946),p=a(83462),m=a(4219),h=a(97368),f=a(42788),g=a(92064),x=a(96724),v=a(57488),y=(a(92342),a(69223)),A=a.n(y),b=a(72450),C=a(96094),w=a(61976),S=a(83560),k=a(51387),j=a(70141),O=a(77265),P=a(83074),z=a(9551),N=a(70579);const I=["createdBy"],M=(0,P.N8)(),B=["Digital Payment Channels","CBHI Providers","Organizations with Agreements","Hospital Services","Payment Methods"],H=()=>{const[e,t]=(0,n.useState)(!1),[a,y]=(0,n.useState)({}),[P,H]=(0,n.useState)(!1),[L,W]=(0,n.useState)({category:"",name:"",address:""}),[R,D]=(0,n.useState)(!1),[E,G]=(0,n.useState)(null),[F,T]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),_=(0,s.A)();function K(e){let{rows:t,columns:a,category:o}=e;return(0,N.jsx)(C.b,{children:(0,N.jsx)(i.A,{variant:"outlined",color:"dark"===_.palette.mode?"secondary":"primary",onClick:()=>(async()=>{const e=new(A().Workbook),r=e.addWorksheet("Payment Data");r.columns=a.filter((e=>"actions"!==e.field)).map((e=>({header:e.headerName||e.field,key:e.field,width:25}))),t.forEach((e=>{const t={};r.columns.forEach((a=>{t[a.key]=e[a.key]})),r.addRow(t)})),r.getRow(1).font={bold:!0};const n=await e.xlsx.writeBuffer(),s=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,b.saveAs)(s,"".concat(o,"_data_.xlsx"))})(),children:"Export to Excel"})})}const Y=async(e,t,a)=>{try{const a=await O.A.get(e);if(200===(null===a||void 0===a?void 0:a.status)||201===(null===a||void 0===a?void 0:a.status)){var n;const e=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map((e=>{let{createdBy:t}=e,a=(0,r.A)(e,I);return(0,o.A)({createdby:t},a)})),s={[t]:e};y((e=>(0,o.A)((0,o.A)({},e),s)))}}catch(s){console.error(s.message)}};(0,n.useEffect)((()=>{Y("/Lookup/payment-type","Payment Methods")}),[F]),(0,n.useEffect)((()=>{Y("/Lookup/payment-channel","Digital Payment Channels")}),[F]),(0,n.useEffect)((()=>{Y("/Lookup/payment-purpose","Hospital Services")}),[F]),(0,n.useEffect)((()=>{Y("/Providers/list-providers","CBHI Providers")}),[F]),(0,n.useEffect)((()=>{Y("/Organiztion/Organization","Organizations with Agreements")}),[F]);const q=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;W({category:e,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}),G(t),H(!0)},J=function(e){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;W({category:e,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",address:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}),G(t),H(!0)},Q=()=>{H(!1),G(null),W({category:"",name:"",address:""})},X=e=>{"address"===e.target.name?W((0,o.A)((0,o.A)({},L),{},{[e.target.name]:e.target.value})):W((0,o.A)((0,o.A)({},L),{},{name:e.target.value}))},Z=async e=>{try{const{category:o,name:n,address:s}=L;if(!n.trim())return;const i={"Digital Payment Channels":"/Lookup/payment-channel","Payment Methods":"/Lookup/payment-type","Hospital Services":"/Lookup/payment-purpose","CBHI Providers":"/Providers/add-provider","Organizations with Agreements":"/Organiztion/Organization"},d={"Digital Payment Channels":"/Lookup/payment-channel","Payment Methods":"/Lookup/payment-type","Hospital Services":"/Lookup/payment-purpose","CBHI Providers":"/Providers/update-provider","Organizations with Agreements":"/Organiztion/Organization"},l={"Digital Payment Channels":{channel:n,createdBy:M.name},"Payment Methods":{type:n,createdBy:M.name},"Hospital Services":e,"CBHI Providers":{provider:n,service:"CBHI",createdBy:M.name},"Organizations with Agreements":{organization:n,address:s,createdBy:M.name}},c={"Digital Payment Channels":{id:Number(E),channel:n,updatedBy:M.name,updatedOn:(new Date).toISOString()},"Payment Methods":{id:Number(E),type:n,updatedBy:M.name,updatedOn:(new Date).toISOString()},"Hospital Services":{id:Number(E),purpose:n,updatedBy:M.name,updatedOn:(new Date).toISOString()},"CBHI Providers":{id:Number(E),provider:n,service:"CBHI",updatedBy:M.name,updatedOn:(new Date).toISOString()},"Organizations with Agreements":{id:Number(E),organization:n,address:s,updatedBy:M.name,updatedOn:(new Date).toISOString()}};if(null!==E&&d[o])try{await O.A.put(d[o],c[o]),v.oR.success("".concat(o," updated successfully!")),T((e=>!e)),Q()}catch(r){var a;console.error("Update error:",r),v.oR.error((null===r||void 0===r||null===(a=r.response)||void 0===a?void 0:a.data)||"Error updating data!")}if(i[o]&&null===E)try{D(!0);const e=await O.A.post(i[o],l[o],{headers:{"Content-Type":"application/json"}});if(201===e.status||200===e.status)return v.oR.success("".concat(o," added successfully!")),T((e=>!e)),t(!1),void Q()}catch(r){console.error("Upload error:",r),v.oR.error("Error Uploading data!")}finally{D(!1)}}catch(r){var o;console.error("Error:",r),v.oR.error((null===r||void 0===r||null===(o=r.response)||void 0===o?void 0:o.data)||"Internal Server Error!")}},$=async(e,t)=>{try{const a={"Digital Payment Channels":"/Lookup/payment-channel","Hospital Services":"/Lookup/payment-purpose","Payment Methods":"/Lookup/payment-type","CBHI Providers":"/Providers/delete-provider","Organizations with Agreements":"/Organiztion/Organization"};if(a[e]){200===(await O.A.delete(a[e],{headers:{"Content-Type":"application/json"},data:{id:t,deletedBy:M.name}})).status&&(v.oR.success("".concat(e," deleted successfully!")),T((e=>!e)))}else console.warn("No API endpoint found for category: ".concat(e))}catch(a){console.error("Error deleting category:",a),v.oR.error("Failed to delete item. Please try again.")}};return(0,N.jsxs)(l.A,{children:[(0,N.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:"Payment Management"}),B.map((e=>(0,N.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,N.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:e}),(0,N.jsx)(u.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:(0,N.jsxs)(i.A,{variant:"contained",color:"light"===_.palette.mode?"primary":"secondary",startIcon:(0,N.jsx)(j.A,{}),onClick:()=>{var a;"Organizations with Agreements"===e?J(e):"Hospital Services"===e?(W({category:a=e,name:a,address:""}),G(null),t(!0)):q(e)},children:["Add ",e]})}),(()=>{const{rows:t,columns:o}=(e=>{const t=(a[e]||[]).map((t=>({id:t.id,name:"Digital Payment Channels"===e?t.channel:"Payment Methods"===e?t.type:"Hospital Services"===e?t.purpose:"CBHI Providers"===e?t.provider:t.organization,createdBy:t.createdby,location:"Organizations with Agreements"===e?t.location:"",amount:"Hospital Services"===e?(0,z.formatAccounting2)(t.amount):0,shortCodes:t.shortCodes,group:t.group,subgroup:t.subgroup})));let o=[];return o="Hospital Services"===e?[{field:"name",headerName:"Name",flex:1.1},{field:"shortCodes",headerName:"ShortCode",flex:1},{field:"group",headerName:"Group",flex:1},{field:"subgroup",headerName:"SubGroup",flex:1},{field:"amount",headerName:"Amount",flex:.5}]:"Organizations with Agreements"===e?[{field:"name",headerName:"Name",flex:1},{field:"location",headerName:"Address",flex:1}]:[{field:"name",headerName:"Name",flex:1}],o.push({field:"actions",headerName:"Actions",flex:.5,renderCell:t=>{var a,o;return"SYS"!==(null===t||void 0===t||null===(a=t.row)||void 0===a||null===(o=a.createdBy)||void 0===o?void 0:o.toUpperCase())&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.A,{onClick:()=>{"Organizations with Agreements"===e||"Hospital Services"===e?J(e,t.row.name,t.row.location,t.row.id):q(e,t.row.name,t.row.id)},children:(0,N.jsx)(S.A,{})}),(0,N.jsx)(d.A,{onClick:()=>$(e,t.row.id),color:"error",children:(0,N.jsx)(k.A,{})})]})}}),{rows:t,columns:o}})(e);return(0,N.jsx)(w.z,{rows:t,columns:o,autoHeight:!0,sx:{minWidth:320},slots:{toolbar:()=>(0,N.jsx)(K,{rows:t,columns:o,category:e})}})})()]},e))),(0,N.jsxs)(p.A,{open:P,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&Q()},disableEnforceFocus:!0,BackdropProps:{"aria-hidden":!1},children:[(0,N.jsxs)(m.A,{children:[null!==E?"Edit":"Add"," ",L.category]}),(0,N.jsxs)(h.A,{style:{display:"flex",msFlexDirection:"column",height:"Organizations with Agreements"===(null===L||void 0===L?void 0:L.category)?"150px":"100px",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,N.jsx)(f.A,{fullWidth:!0,label:"Name",name:"name",value:L.name,onChange:X,autoFocus:!0,InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},color:"dark"===_.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===_.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===_.palette.mode?"#fff":"#000"}}}}),"Organizations with Agreements"===(null===L||void 0===L?void 0:L.category)&&(0,N.jsx)(f.A,{fullWidth:!0,label:"Address",name:"address",value:(null===L||void 0===L?void 0:L.address)||"",onChange:X,autoFocus:!0,sx:{marginTop:"10px"},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===_.palette.mode?"#fff":"#000"},color:"dark"===_.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===_.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===_.palette.mode?"#fff":"#000"}}}})]}),(0,N.jsxs)(g.A,{children:[(0,N.jsx)(i.A,{onClick:Q,color:"error",children:"Cancel"}),(0,N.jsx)(i.A,{variant:"contained",color:"light"===_.palette.mode?"primary":"success",onClick:Z,children:"Save"})]})]}),(0,N.jsx)(x.A,{isOpen:e,setIsOpen:t,loading:R,setLoading:D,onSubmit:Z}),(0,N.jsx)(v.N9,{})]})}},70141:(e,t,a)=>{a.d(t,{A:()=>n});var o=a(66734),r=a(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},83560:(e,t,a)=>{a.d(t,{A:()=>n});var o=a(66734),r=a(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},96094:(e,t,a)=>{a.d(t,{b:()=>h});var o=a(58168),r=a(98587),n=(a(65043),a(58387)),s=a(46060),i=a(98610),d=a(85749),l=a(76674),c=a(92334),u=a(70579);const p=["className","children"],m=(0,s.A)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,t)=>t.toolbarContainer})((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",flexWrap:"wrap",gap:t.spacing(1),padding:t.spacing(.5,.5,0)}})),h=(0,d.R)((function(e,t){const{className:a,children:s}=e,d=(0,r.A)(e,p),h=(0,c.A)(),f=(e=>{const{classes:t}=e;return(0,i.A)({root:["toolbarContainer"]},l.B,t)})(h);return s?(0,u.jsx)(m,(0,o.A)({className:(0,n.A)(f.root,a),ownerState:h},d,{ref:t,children:s})):null}))},96724:(e,t,a)=>{a.d(t,{A:()=>x});var o=a(89379),r=a(65043),n=a(57556),s=a(46946),i=a(94496),d=a(88911),l=a(71716),c=a(72882),u=a(97334),p=a(61976),m=a(11238),h=a(57488),f=a(33086),g=a(70579);const x=e=>{let{isOpen:t=!1,setIsOpen:a,onSubmit:x,loading:v,setLoading:y}=e;const[A,b]=(0,r.useState)([]),C=(0,r.useRef)(null),w=()=>{try{a(!1),b([]),y(!1)}catch(e){console.error("Close error",e)}};(0,r.useEffect)((()=>{t||w()}),[t]);return(0,g.jsx)(n.A,{open:t,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&w()},"aria-labelledby":"modal-title",children:(0,g.jsxs)(s.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxHeight:"90vh",overflowY:"auto",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:3},children:[(0,g.jsx)(i.A,{variant:"h6",gutterBottom:!0,id:"modal-title",children:"Upload Hospital Services (Excel)"}),(0,g.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",mb:2,children:[(0,g.jsx)("input",{ref:C,type:"file",accept:".xlsx, .xls",onChange:e=>{try{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{const t=new Uint8Array(e.target.result),a=m.LF(t,{type:"array"}),r=a.SheetNames[0],n=a.Sheets[r],s=m.Wp.sheet_to_json(n).map(((e,t)=>(0,o.A)({id:t+1},e)));b(s)},a.readAsArrayBuffer(t)}catch(t){console.error("File Upload Error: ",t)}}}),(0,g.jsx)(l.A,{onClick:()=>{b([]),C.current.value=null},color:"error",sx:{marginLeft:2},children:(0,g.jsx)(f.A,{})}),(0,g.jsx)(c.A,{variant:"contained",disabled:!A.length||v,onClick:async()=>{try{x({purpose:A.map((e=>e.Name)),amount:A.map((e=>e.Amount)),shortCode:A.map((e=>e.ShortCode)),group:A.map((e=>e.Group)),subgroup:A.map((e=>e.SubGroup))})}catch(e){console.error(e),h.oR.error("Upload failed.")}},children:v?(0,g.jsx)(u.A,{size:24}):"Upload to Database"})]}),(0,g.jsx)(s.A,{sx:{height:400,width:"100%"},children:(0,g.jsx)(p.z,{rows:A,columns:[{field:"Name",headerName:"Hospital Services",flex:1},{field:"ShortCode",headerName:"Short Code",flex:1},{field:"Group",headerName:"Group",flex:1},{field:"SubGroup",headerName:"SubGroup",flex:1},{field:"Amount",headerName:"Amount",flex:1}],autoHeight:!0,sx:{minWidth:320}})}),(0,g.jsx)(s.A,{sx:{display:"flex",justifyContent:"right",width:"100%"},children:(0,g.jsx)(c.A,{variant:"contained",sx:{margin:"10px"},onClick:()=>w(),color:"error",children:"Cancel"})})]})})}}}]);
//# sourceMappingURL=3665.83d6d5ac.chunk.js.map