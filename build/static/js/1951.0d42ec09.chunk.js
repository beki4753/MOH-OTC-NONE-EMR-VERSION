"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[603,1951,5841,8222],{1849:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M10 4h4v2h-4zm6 11h-3v3h-2v-3H8v-2h3v-3h2v3h3z"}),"MedicalServices")},12379:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var o=r(65043),a=r(72882),l=r(46946),s=r(94496),n=r(65204),i=r(19955),d=r(40360),c=r(97334),u=r(42788),h=r(8591),p=r(83462),v=r(4219),x=r(71716),m=r(97368),f=r(88911),A=r(92064),j=r(99784),C=r(1273),g=r(61976),b=r(99562),y=r(47805),k=r(57488),w=r(26240),S=r(77265),q=(r(92342),r(74802)),z=r(63713),N=r(1849),M=r(46873),T=r(56258),L=r(19778),I=r(63121),O=r(55134),R=r(47367),E=r(45465),D=r(83074),F=r(70579);const H=(e,t)=>{var r;try{switch((e||"").toLowerCase()){case"completed":return(0,F.jsx)(L.A,{fontSize:"small",sx:{color:"green"}});case"paid":return(0,F.jsx)(O.A,{fontSize:"small",sx:{color:"dark"===(null===t||void 0===t||null===(r=t.palette)||void 0===r?void 0:r.mode)?"#388ada":"blue"}});case"ordered":return(0,F.jsx)(R.A,{fontSize:"small",sx:{color:"orange"}});case"failed":return(0,F.jsx)(I.A,{fontSize:"small",sx:{color:"red"}});default:return(0,F.jsx)(E.A,{fontSize:"small",sx:{color:"grey.600"}})}}catch(o){console.error("This is getStatusIcon Error : ",o)}},V=(0,D.N8)(),P=()=>{var e,t,r;const L=(0,w.A)(),[I,O]=(0,o.useState)([]),[R,E]=(0,o.useState)(!1),[D,P]=(0,o.useState)(!1),[W,U]=(0,o.useState)("all"),[B,G]=(0,o.useState)(""),[K,_]=(0,o.useState)(!1),[J,Q]=(0,o.useState)([]),[X,Y]=(0,o.useState)(""),[Z,$]=(0,o.useState)(""),[ee,te]=(0,o.useState)(!1),[re,oe]=(0,o.useState)([]),[ae,le]=(0,o.useState)([]),[se,ne]=(0,o.useState)({}),[ie,de]=(0,o.useState)(!1),ce="light"===L.palette.mode?"#0078d7":L.palette.secondary.main;(0,o.useEffect)((()=>{(async()=>{E(!0);try{var e,t,r,o;O([]);const a=null!==V&&void 0!==V&&null!==(e=V.UserType)&&void 0!==e&&null!==(t=e.toLowerCase())&&void 0!==t&&t.includes("mlt")?"/Request/doctor/get-request-lab":"/Request/doctor/get-request-radiology",l=await S.A.get(a),s=(null===l||void 0===l||null===(r=l.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.value)||[];s.sort(((e,t)=>new Date(t.createdOn)-new Date(e.createdOn)));const n=new Map;s.forEach((e=>{const t=[e.patientFirstName,e.patientMiddleName,e.patientLastName].filter(Boolean).join(" "),r="".concat(e.patientCardNumber,"-").concat(e.requestedDepartment,"-").concat(e.createdOn.slice(0,16).replace("T"," "));n.has(r)||n.set(r,{id:r,patientCardNumber:e.patientCardNumber,patientFName:t,requestedReason:e.requestedDepartment,requestGroup:e.requestingDepartment,createdOn:e.createdOn.slice(0,16).replace("T"," "),tests:[],paid:[],totalPrice:0,requestedItems:[]});const o=n.get(r);e.requestedItems.forEach((e=>{o.tests.push(e.requestedServices||"Unknown"),o.paid.push(e.requeststatus||"Unpaid"),o.totalPrice+=e.price||0,o.requestedItems.push(e)}))}));const i=Array.from(n.values());O(i)}catch(s){var a,l;console.error("This is fetchData Error : ",s),k.oR.error((null===s||void 0===s||null===(a=s.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.msg)||"Failed to fetch data")}finally{E(!1)}})()}),[D]);const ue=(0,o.useMemo)((()=>{try{var e;const t=(null===I||void 0===I?void 0:I.length)>0?new Set(I.flatMap((e=>Array.isArray(null===e||void 0===e?void 0:e.paid)?e.paid.map((e=>e||"Unpaid")):["Unpaid"]))):[];return(null===(e=Array.from(t))||void 0===e?void 0:e.length)>0?["all",...Array.from(t)]:[]}catch(t){return console.error("getTabs Error:",t),["all"]}}),[I]),he=(0,o.useMemo)((()=>(null===I||void 0===I?void 0:I.length)>0?null===I||void 0===I?void 0:I.filter((e=>{var t;const r=null===e||void 0===e||null===(t=e.paid)||void 0===t?void 0:t.map((e=>(e||"").toLowerCase())),o="all"===W||(null===r||void 0===r?void 0:r.includes(null===W||void 0===W?void 0:W.toLowerCase())),a=e.patientFName.toLowerCase().includes(B.toLowerCase())||e.patientCardNumber.toLowerCase().includes(B.toLowerCase());return o&&a})):[]),[I,W,B]),pe=[{field:"patientCardNumber",headerName:"Card Number",flex:1},{field:"patientFName",headerName:"Patient Name",flex:1},{field:"requestedReason",headerName:"Category",flex:1},{field:"tests",headerName:"Tests",flex:2},{field:"requestGroup",headerName:"Requested From",flex:1},{field:"totalPrice",headerName:"Amount",flex:1},{field:"paid",headerName:"Status",flex:1,renderCell:e=>{try{var t,r;const o=new Set(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.paid);return null===(r=Array.from(o||[]))||void 0===r?void 0:r.join(", ")}catch(o){return console.error(o),""}}},{field:"createdOn",headerName:"Date",flex:1},{field:"Action",headerName:"Action",flex:1.5,renderCell:e=>{var t;return(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.paid.some((e=>"paid"===(null===e||void 0===e?void 0:e.toLowerCase()))))&&(0,F.jsx)(a.A,{variant:"outlined",startIcon:(0,F.jsx)(b.A,{}),onClick:()=>{oe(e.row.requestedItems),le([]),ne({name:e.row.patientFName,group:e.row.requestGroup}),te(!0)},color:"dark"===L.palette.mode?"secondary":"primary",sx:{color:"light"===L.palette.mode?"#2e8ac9":"secondary",border:"1px solid ".concat("light"===L.palette.mode?"rgb(82 158 210)":"secondary")},children:"Mark Completed"})}}],ve=()=>{te(!1),ne({}),oe([])},xe=()=>{_(!1),Y(""),$(""),Q([])},me=e=>{const{checked:t,name:r}=e.target,o=re.filter((e=>e.requestCatagory===r&&"paid"===(e.requeststatus||"").toLowerCase()));le((e=>{if(t){const t=o.filter((t=>!e.includes(t)));return[...e,...t]}return e.filter((e=>e.requestCatagory!==r))}))};return(0,F.jsxs)(l.A,{p:4,children:[(0,F.jsx)(s.A,{variant:"h4",align:"center",fontWeight:700,sx:{mb:4,color:"dark"===L.palette.mode?"#fff":"#000"},children:"Patient Treatment Entry"}),(0,F.jsx)(n.A,{sx:{mb:2,borderRadius:2},children:(null===ue||void 0===ue?void 0:ue.length)>0?(0,F.jsx)(i.A,{value:ue.includes(W)?W:"all",onChange:(e,t)=>U(t),variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"capitalize",fontWeight:600,borderRadius:2,mx:1,color:"dark"===L.palette.mode?"#aaa":"#333"},"& .Mui-selected":{backgroundColor:"#2e8ac9",color:"dark"===L.palette.mode?"#000000DE":"#fff !important"},"& .MuiTabs-indicator":{display:"none"}},children:ue.map(((e,t)=>(0,F.jsx)(d.A,{label:"all"===e?"All":e,value:e},t)))}):(0,F.jsx)(l.A,{display:"flex",justifyContent:"center",py:2,children:(0,F.jsx)(c.A,{size:24,color:"inherit"})})}),(0,F.jsx)(u.A,{fullWidth:!0,label:"Search...",variant:"outlined",value:B,onChange:e=>G(e.target.value),sx:{mb:2},InputProps:{sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===L.palette.mode?"#fff":"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===L.palette.mode?"#fff":"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"dark"===L.palette.mode?"#fff":"#000"},color:"dark"===L.palette.mode?"#fff":"#000"}},InputLabelProps:{sx:{color:"dark"===L.palette.mode?"#ccc":"#555","&.Mui-focused":{color:"dark"===L.palette.mode?"#fff":"#000"}}}}),(0,F.jsx)(l.A,{mb:2,children:(0,F.jsx)(h.Ay,{container:!0,justifyContent:"flex-end",children:(0,F.jsx)(a.A,{variant:"outlined",onClick:()=>P((e=>!e)),disabled:R,color:"dark"===L.palette.mode?"secondary":"primary",children:R?(0,F.jsx)(c.A,{size:24}):(0,F.jsx)(y.A,{})})})}),(0,F.jsx)(n.A,{elevation:3,children:(0,F.jsx)(g.z,{rows:he,columns:pe,loading:R,getRowId:e=>e.id,onRowDoubleClick:(e,t)=>((e,t)=>{try{var r;if("BUTTON"===t.target.nodeName||null!==(r=t.currentTarget.querySelector("button"))&&void 0!==r&&r.contains(t.target))return;Q(e.row.requestedItems),Y(e.row.patientFName),$(e.row.requestGroup),_(!0)}catch(o){console.error("This is handleDoubleClick Error : ",o)}})(e,t),autoHeight:!0,sx:{minWidth:320}})}),(0,F.jsxs)(p.A,{open:K,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&xe()},fullWidth:!0,maxWidth:"sm",TransitionComponent:T.A,disableEnforceFocus:!0,BackdropProps:{"aria-hidden":!1},children:[(0,F.jsx)(v.A,{sx:{bgcolor:"#166295",color:"primary.contrastText",py:2,px:3},children:(0,F.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,F.jsxs)(s.A,{variant:"h6",children:["Tests for ",(0,F.jsx)("strong",{children:X})," from"," ",(0,F.jsx)("strong",{children:Z})]}),(0,F.jsx)(x.A,{onClick:()=>xe(),sx:{color:"primary.contrastText"},children:(0,F.jsx)(q.A,{})})]})}),(0,F.jsx)(m.A,{dividers:!0,sx:{py:3,px:3},children:(null===J||void 0===J?void 0:J.length)>0?(0,F.jsx)(l.A,{sx:{maxHeight:"60vh",overflow:"auto",pr:1},children:null===(e=Object.entries((null===J||void 0===J?void 0:J.length)>0?null===J||void 0===J?void 0:J.reduce(((e,t)=>{const r=null===t||void 0===t?void 0:t.requestCatagory;return e[r]||(e[r]=[]),e[r].push(t),e}),{}):{}))||void 0===e?void 0:e.map((e=>{let[t,r]=e;return(0,F.jsxs)(l.A,{mb:3,sx:{borderLeft:"4px solid",borderColor:"#398bdb",pl:2},children:[(0,F.jsxs)(s.A,{variant:"subtitle1",fontWeight:"bold",color:"dark"===L.palette.mode?"#fff":"#000",children:[(0,F.jsx)(z.A,{fontSize:"small"})," ",t]}),(0,F.jsx)(f.A,{spacing:1.5,pl:2,children:r.map(((e,t)=>(0,F.jsxs)(n.A,{sx:{p:1.5,border:"1px solid",borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)(l.A,{display:"flex",alignItems:"center",gap:1,children:[(0,F.jsx)(N.A,{fontSize:"small"}),(0,F.jsx)(s.A,{children:e.requestedServices})]}),(0,F.jsxs)(l.A,{display:"flex",alignItems:"center",gap:1,children:[H(e.requeststatus,L),(0,F.jsx)(s.A,{variant:"body2",color:"text.secondary",children:e.requeststatus})]})]},t)))})]},t)}))}):(0,F.jsxs)(l.A,{textAlign:"center",py:4,children:[(0,F.jsx)(M.A,{sx:{fontSize:60},color:"disabled"}),(0,F.jsx)(s.A,{variant:"h6",color:"text.secondary",children:"No tests available"})]})}),(0,F.jsx)(A.A,{sx:{p:3},children:(0,F.jsx)(a.A,{onClick:()=>xe(),color:"secondary",variant:"contained",startIcon:(0,F.jsx)(q.A,{}),children:"Close"})})]}),(0,F.jsxs)(p.A,{open:ee,onClose:(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&ve()},fullWidth:!0,maxWidth:"sm",TransitionComponent:T.A,disableEnforceFocus:!0,BackdropProps:{"aria-hidden":!1},children:[(0,F.jsx)(v.A,{sx:{bgcolor:"#166295",color:"primary.contrastText",py:2,px:3},children:(0,F.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,F.jsxs)(s.A,{variant:"h6",children:["Select tests to complete for"," ",(0,F.jsx)("strong",{children:(null===se||void 0===se?void 0:se.name)||"Unknown"})]}),(0,F.jsx)(x.A,{onClick:()=>ve(),sx:{color:"primary.contrastText"},children:(0,F.jsx)(q.A,{})})]})}),(0,F.jsx)(m.A,{dividers:!0,sx:{py:3,px:3},children:(null===re||void 0===re||null===(t=re.filter((e=>"paid"===((null===e||void 0===e?void 0:e.requeststatus)||"").toLowerCase())))||void 0===t?void 0:t.length)>0?(0,F.jsx)(l.A,{sx:{maxHeight:"60vh",overflow:"auto",pr:1},children:Object.entries(null===re||void 0===re||null===(r=re.filter((e=>"paid"===(e.requeststatus||"").toLowerCase())))||void 0===r?void 0:r.reduce(((e,t)=>{const r=t.requestCatagory;return e[r]||(e[r]=[]),e[r].push(t),e}),{})).map((e=>{let[t,r]=e;const o=r.filter((e=>ae.includes(e))).length,a=r.length,i=o===a&&a>0,d=o>0&&o<a;return(0,F.jsxs)(l.A,{mb:3,sx:{borderLeft:"4px solid #398bdb",pl:2},children:[(0,F.jsx)(s.A,{variant:"subtitle1",fontWeight:"bold",mb:1,children:(0,F.jsx)(j.A,{label:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(z.A,{fontSize:"small"})," ",t]}),name:t,control:(0,F.jsx)(C.A,{checked:i,indeterminate:d,onChange:me,sx:{color:ce,"&.Mui-checked":{color:ce},"&.MuiCheckbox-indeterminate":{color:ce}}})})}),(0,F.jsx)(f.A,{spacing:1.5,pl:2,children:r.map(((e,t)=>{const r=ae.includes(e);return(0,F.jsxs)(n.A,{onClick:()=>{le((t=>r?t.filter((t=>t!==e)):[...t,e]))},sx:{p:1.5,display:"flex",alignItems:"center",gap:2,border:"1px solid",borderColor:"divider",bgcolor:r?"action.selected":"background.paper",cursor:"pointer"},children:[(0,F.jsx)("input",{type:"checkbox",readOnly:!0,checked:r}),(0,F.jsxs)(s.A,{children:[(0,F.jsx)(N.A,{fontSize:"small"})," ",e.requestedServices]})]},t)}))})]},t)}))}):(0,F.jsxs)(l.A,{textAlign:"center",py:4,children:[(0,F.jsx)(M.A,{sx:{fontSize:60},color:"disabled"}),(0,F.jsx)(s.A,{variant:"h6",color:"text.secondary",children:"No paid tests available for completion"})]})}),(0,F.jsxs)(A.A,{sx:{p:3},children:[(0,F.jsx)(a.A,{onClick:()=>(async()=>{try{de(!0);const e=await Promise.all(ae.map((e=>{const t=Number(e.id);return S.A.put("/Request/doctor/complete-request",t,{headers:{"Content-Type":"application/json"}})})));null!==e&&void 0!==e&&e.every((e=>200===(null===e||void 0===e?void 0:e.status)))&&(k.oR.success("".concat(ae.length," test(s) marked as completed")),te(!1),P((e=>!e)))}catch(e){console.error("This is handleMarkAsCompleted Error : ",e),k.oR.error("".concat(e))}finally{de(!1)}})(),variant:"contained",color:"dark"===L.palette.mode?"secondary":"primary",disabled:0===(null===ae||void 0===ae?void 0:ae.length)||ie,children:ie?(0,F.jsx)(c.A,{size:24,color:"inherit"}):"Complete Selected Tests"}),(0,F.jsx)(a.A,{onClick:()=>ve(),variant:"outlined",color:"error",children:"Cancel"})]})]}),(0,F.jsx)(k.N9,{})]})}},19778:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},45465:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")},46873:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-6 15h-2v-2h2zm0-4h-2V8h2zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"AssignmentLate")},47367:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"}),"HourglassEmpty")},47805:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(66734),a=r(70579);const l=(0,o.A)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},55134:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m.88 15.76V19h-1.75v-1.29c-.74-.18-2.39-.77-3.02-2.96l1.65-.67c.06.22.58 2.09 2.4 2.09.93 0 1.98-.48 1.98-1.61 0-.96-.7-1.46-2.28-2.03-1.1-.39-3.35-1.03-3.35-3.31 0-.1.01-2.4 2.62-2.96V5h1.75v1.24c1.84.32 2.51 1.79 2.66 2.23l-1.58.67c-.11-.35-.59-1.34-1.9-1.34-.7 0-1.81.37-1.81 1.39 0 .95.86 1.31 2.64 1.9 2.4.83 3.01 2.05 3.01 3.45 0 2.63-2.5 3.13-3.02 3.22"}),"Paid")},63121:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},63713:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-2.06 11L15 15.28 12.06 17l.78-3.33-2.59-2.24 3.41-.29L15 8l1.34 3.14 3.41.29-2.59 2.24z"}),"FolderSpecial")},74802:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},99562:(e,t,r)=>{var o=r(24994);t.A=void 0;var a=o(r(40039)),l=r(70579);t.A=(0,a.default)((0,l.jsx)("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39z"}),"TaskAlt")}}]);
//# sourceMappingURL=1951.0d42ec09.chunk.js.map